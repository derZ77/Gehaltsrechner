
<!DOCTYPE html>

<html lang="de">
<head><meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta charset="utf-8"/>
<title>Brutto-Netto Rechner – Eingruppierung &amp; Zuschlagsätze</title>
<style>
        body {
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
            color: #222;
        }
        .bereich {
            background-color: #ffffff;
            border-radius: 10px;
            padding: 20px;
            margin: 20px auto;
            max-width: 900px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .feld {
            margin-bottom: 15px;
        }
        .feld label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        .wertanzeige {
            font-size: 1.2em;
            font-weight: bold;
        }
        select {
            padding: 8px 12px;
            width: 100%;
            max-width: 420px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 1em;
        }
        h3 {
            color: #155724;
            font-size: 1.4em;
            margin-top: 0;
        }
    
.bereich {
    border: 2px solid #37474f;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    background-color: #fafafa;
}
.bereich h3 {
    margin-top: 0;
    color: #0d47a1;
}

/* Eingabefelder modernisieren */
input[type="number"], select {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 6px;
    width: 100%;
    box-sizing: border-box;
    font-size: 1em;
    transition: border 0.2s ease;
}
input[type="number"]:focus, select:focus {
    border-color: #0288d1;
    outline: none;
}

/* Farbleiste oben */
body::before {
    content: "";
    display: block;
    width: 100%;
    height: 6px;
    background: linear-gradient(to right, #0288d1, #00acc1);
    margin-bottom: 16px;
}
</style>
<style>
@media print {
  button, select, input[type="number"], details > summary {
    display: none !important;
  }
  body {
    margin: 0;
    padding: 0;
    font-size: 11pt;
  }
  .bereich {
    page-break-inside: avoid;
    border: 1px solid #ccc !important;
    background: white !important;
    box-shadow: none !important;
  }
}
</style>
<style>
/* Responsives Verhalten für Tablets und Smartphones */
@media screen and (max-width: 768px) {
    .bereich {
        padding: 12px;
        margin: 10px;
    }
    input[type="number"], select {
        font-size: 1em;
        padding: 10px;
    }
    .feld label {
        font-size: 0.95em;
    }
    .wertanzeige {
        font-size: 1.1em;
    }
    button {
        width: 100%;
        margin-top: 10px;
    }
}
</style></head>
<body>
<div style="background-color: #01579b; color: white; padding: 12px 24px; font-size: 1.3em; font-weight: bold; font-family: sans-serif;">
  Rechner für Nettolohn auf Grundlage des TVN-Thüringen
</div>
<div class="bereich" id="eingruppierungBlock" style="background-color:#e0f7fa;">
<h3>Eingruppierung</h3>
<div class="feld">
<label for="egSelect">Bitte Ihre Eingruppierung auswählen:</label>
<select id="egSelect" onchange="zeigeEingruppierungWerte()">
<option value="">– bitte auswählen –</option>
<option value="1/1">1/1</option><option value="1/2">1/2</option><option value="1/3">1/3</option><option value="2/1">2/1</option><option value="2/2">2/2</option><option value="2/3">2/3</option><option value="3/1">3/1</option><option value="3/2">3/2</option><option value="3/3">3/3</option><option value="4/1">4/1</option><option value="4/2">4/2</option><option value="4/3">4/3</option><option value="5/1">5/1</option><option value="5/2">5/2</option><option value="5/3">5/3</option><option value="6/1">6/1</option><option value="6/2">6/2</option><option value="6/3">6/3</option><option value="7/1">7/1</option><option value="7/2">7/2</option><option value="7/3">7/3</option><option value="8/1">8/1</option><option value="8/2">8/2</option><option value="8/3">8/3</option><option value="9/1">9/1</option><option value="9/2">9/2</option><option value="9/3">9/3</option>
</select>
</div>
<div class="feld">
<label>Monatsgehalt:</label>
<div class="wertanzeige" id="monatsgehalt">–</div>
</div>
<div class="feld">
<label>Stundenlohn:</label>
<div class="wertanzeige" id="stundenlohn">–</div>
</div>
</div>
<div class="bereich" id="zuschlagssaetzeBlock">
<h3>Zuschlagsätze (aus Stundenlohn berechnet)</h3>
<div class="feld"><label>Samstag (10 %):</label><div class="wertanzeige" id="satzSamstag">–</div></div>
<div class="feld"><label>Nacht (20 %):</label><div class="wertanzeige" id="satzNacht">–</div></div>
<div class="feld"><label>Sonntag (30 %):</label><div class="wertanzeige" id="satzSonntag">–</div></div>
<div class="feld"><label>Feiertag (135 %):</label><div class="wertanzeige" id="satzFeiertag">–</div></div>
<div class="feld"><label>24./31.12 (100 %):</label><div class="wertanzeige" id="satzDez">–</div></div>
</div>
<script>
        const egTabelle = {
            "1/1": [2632.44, 13.21], "1/2": [2819.78, 13.50], "1/3": [3007.14, 13.78],
            "2/1": [2901.60, 17.56], "2/2": [3122.68, 18.90], "2/3": [3344.45, 20.24],
            "3/1": [3023.86, 18.30], "3/2": [3260.41, 19.73], "3/3": [3495.54, 21.16],
            "4/1": [3182.71, 19.60], "4/2": [3438.92, 20.81], "4/3": [3695.83, 22.37],
            "5/1": [3246.04, 19.65], "5/2": [3510.08, 21.24], "5/3": [3774.13, 22.84],
            "6/1": [3329.58, 20.15], "6/2": [3604.06, 21.81], "6/3": [3878.54, 23.47],
            "7/1": [3512.98, 21.26], "7/2": [3810.68, 23.06], "7/3": [4106.94, 24.86],
            "8/1": [3659.85, 22.15], "8/2": [3975.83, 24.06], "8/3": [4293.18, 25.98],
            "9/1": [3917.08, 23.71], "9/2": [4263.23, 25.80], "9/3": [4612.93, 27.92]
        };

        function zeigeEingruppierungWerte() {
            const auswahl = document.getElementById("egSelect").value;
            const lohnfeld = document.getElementById("stundenlohn");
            const gehaltfeld = document.getElementById("monatsgehalt");

            if (egTabelle[auswahl]) {
                const gehalt = egTabelle[auswahl][0];
                const lohn = egTabelle[auswahl][1];
                gehaltfeld.innerText = gehalt.toFixed(2) + " €";
                lohnfeld.innerText = lohn.toFixed(2) + " €";

                document.getElementById("satzSamstag").innerText = (lohn * 0.10).toFixed(2) + " €";
                document.getElementById("satzNacht").innerText = (lohn * 0.20).toFixed(2) + " €";
                document.getElementById("satzSonntag").innerText = (lohn * 0.30).toFixed(2) + " €";
                document.getElementById("satzFeiertag").innerText = (lohn * 1.35).toFixed(2) + " €";
                document.getElementById("satzDez").innerText = (lohn * 1.00).toFixed(2) + " €";
            } else {
                gehaltfeld.innerText = "–";
                lohnfeld.innerText = "–";
                document.getElementById("satzSamstag").innerText = "–";
                document.getElementById("satzNacht").innerText = "–";
                document.getElementById("satzSonntag").innerText = "–";
                document.getElementById("satzFeiertag").innerText = "–";
                document.getElementById("satzDez").innerText = "–";
            }
        }
    </script>
<div class="bereich" id="zuschlaegeBlock">
<h3>Zuschläge</h3>
<div class="feld">
<label for="nachtstunden">Nachtstunden (20 %):</label>
<input id="nachtstunden" min="0" oninput="berechneZuschlaege(); berechneZuschlagsGesamtsumme()" type="number"/>
</div>
<div class="feld">
<label for="samstagstunden">Samstagsstunden (10 %):</label>
<input id="samstagstunden" min="0" oninput="berechneZuschlaege(); berechneZuschlagsGesamtsumme()" type="number"/>
</div>
<div class="feld">
<label for="sonntagstunden">Sonntagsstunden (30 %):</label>
<input id="sonntagstunden" min="0" oninput="berechneZuschlaege(); berechneZuschlagsGesamtsumme()" type="number"/>
</div>
<div class="feld">
<label for="feiertagstunden">Feiertagsstunden (135 %):</label>
<input id="feiertagstunden" min="0" oninput="berechneZuschlaege(); berechneZuschlagsGesamtsumme()" type="number"/>
</div>
<div class="feld">
<label for="dezstunden">24./31.12 Stunden ab 14 Uhr (100 %):</label>
<input id="dezstunden" min="0" oninput="berechneZuschlaege(); berechneZuschlagsGesamtsumme()" type="number"/>
<small>Achtung: Zuschlag nur ab 14 Uhr bis 24 Uhr</small>
</div>
<div class="feld">
<strong>Summe Zuschläge:</strong> <span id="zuschlagSumme">–</span>
</div>
</div>
<script>
function berechneZuschlaege() {
    const lohnText = document.getElementById("stundenlohn").innerText.replace(" €", "").replace(",", ".");
    const stundenlohn = parseFloat(lohnText);

    if (isNaN(stundenlohn)) {
        document.getElementById("zuschlagSumme").innerText = "–";
        return;
    }

    const nacht = parseFloat(document.getElementById("nachtstunden").value) || 0;
    const samstag = parseFloat(document.getElementById("samstagstunden").value) || 0;
    const sonntag = parseFloat(document.getElementById("sonntagstunden").value) || 0;
    const feiertag = parseFloat(document.getElementById("feiertagstunden").value) || 0;
    const dez = parseFloat(document.getElementById("dezstunden").value) || 0;

    const summe =
        nacht * stundenlohn * 0.20 +
        samstag * stundenlohn * 0.10 +
        sonntag * stundenlohn * 0.30 +
        feiertag * stundenlohn * 1.35 +
        dez * stundenlohn * 1.00;

    document.getElementById("zuschlagSumme").innerText = summe.toFixed(2) + " €";
}
</script>
<div class="bereich" id="diensteWegeBlock">
<h3>Zuschläge für geteilte Dienste &amp; Wegezeit</h3>
<div class="feld">
<label for="geteilteDienste">Anzahl geteilte Dienste (je 15 €):</label>
<input id="geteilteDienste" min="0" oninput="berechneDiensteZuschlaege(); berechneZuschlagsGesamtsumme()" type="number"/>
<span id="betragGeteilt">–</span>
</div>
<div class="feld">
<label for="wegeDienste">Anzahl Dienste mit Wegezeiten (je 6 €):</label>
<input id="wegeDienste" min="0" oninput="berechneDiensteZuschlaege(); berechneZuschlagsGesamtsumme()" type="number"/>
<span id="betragWege">–</span>
</div>
<div class="feld">
<strong>Gesamt Zuschläge (geteilt &amp; Wege):</strong>
<span id="gesamtDiensteZuschlag">–</span>
</div>
</div>
<script>
function berechneDiensteZuschlaege() {
    const geteilt = parseInt(document.getElementById("geteilteDienste").value) || 0;
    const wege = parseInt(document.getElementById("wegeDienste").value) || 0;

    const summeGeteilt = geteilt * 15;
    const summeWege = wege * 6;
    const gesamt = summeGeteilt + summeWege;

    document.getElementById("betragGeteilt").innerText = summeGeteilt.toFixed(2) + " €";
    document.getElementById("betragWege").innerText = summeWege.toFixed(2) + " €";
    document.getElementById("gesamtDiensteZuschlag").innerText = gesamt.toFixed(2) + " €";
}
</script>
<div class="bereich" id="schichtformBlock">
<h3>Schichtform</h3>
<div class="feld">
<label for="schichtform">Bitte wählen Sie Ihre Schichtform:</label>
<select id="schichtform" onchange="berechneSchichtform()">
<option value="0">Keine Schicht</option>
<option value="50">Schicht</option>
<option value="110">Wechselschicht</option>
</select>
</div>
<div class="feld">
<strong>Zuschlag Schichtform:</strong> <span id="schichtZuschlag">–</span>
</div>
</div>
<script>
function berechneSchichtform() {
    const betrag = parseFloat(document.getElementById("schichtform").value) || 0;
    document.getElementById("schichtZuschlag").innerText = betrag.toFixed(2) + " €";
}
</script>
<div class="bereich" id="dfBlock">
<h3>Dienstfrei an Feiertagen (DF)</h3>
<div class="feld">
<label for="dfStunden">Anzahl Stunden DF:</label>
<input id="dfStunden" min="0" oninput="berechneDFZuschlag(); berechneZuschlagsGesamtsumme()" step="0.1" type="number"/>
</div>
<div class="feld">
<label for="dfSatz">Optionaler Stundensatz (leer = 1,55 €):</label>
<input id="dfSatz" min="0" oninput="berechneDFZuschlag(); berechneZuschlagsGesamtsumme()" step="0.01" type="number"/>
</div>
<div class="feld">
<strong>Zuschlag für DF:</strong> <span id="dfZuschlag">–</span>
</div>
</div>
<div class="bereich" id="efzBlock">
<h3>Entgeltfortzahlung (z. B. bei Krankheit)</h3>
<div class="feld">
<label for="efzStunden">Anzahl Stunden:</label>
<input id="efzStunden" min="0" oninput="berechneEFZZuschlag(); berechneZuschlagsGesamtsumme()" step="0.1" type="number"/>
</div>
<div class="feld">
<label for="efzSatz">Optionaler Stundensatz (leer = 1,55 €):</label>
<input id="efzSatz" min="0" oninput="berechneEFZZuschlag(); berechneZuschlagsGesamtsumme()" step="0.01" type="number"/>
</div>
<div class="feld">
<strong>Zuschlag EFZ:</strong> <span id="efzZuschlag">–</span>
</div>
</div>
<div class="bereich" id="urlaubBlock">
<h3>Urlaubsdurchschnitt</h3>
<div class="feld">
<label for="urlaubStunden">Anzahl Stunden:</label>
<input id="urlaubStunden" min="0" oninput="berechneUrlaubZuschlag(); berechneZuschlagsGesamtsumme()" step="0.1" type="number"/>
</div>
<div class="feld">
<label for="urlaubSatz">Optionaler Stundensatz (leer = 1,55 €):</label>
<input id="urlaubSatz" min="0" oninput="berechneUrlaubZuschlag(); berechneZuschlagsGesamtsumme()" step="0.01" type="number"/>
</div>
<div class="feld">
<strong>Zuschlag Urlaub:</strong> <span id="urlaubZuschlag">–</span>
</div>
</div>
<script>
function berechneDFZuschlag() {
    const stunden = parseFloat(document.getElementById("dfStunden").value) || 0;
    const satzInput = document.getElementById("dfSatz").value;
    let satz = parseFloat(satzInput);
    if (isNaN(satz)) { satz = 1.55; }
    const betrag = stunden * satz;
    document.getElementById("dfZuschlag").innerText = betrag.toFixed(2) + " €";
}

function berechneEFZZuschlag() {
    const stunden = parseFloat(document.getElementById("efzStunden").value) || 0;
    const satzInput = document.getElementById("efzSatz").value;
    let satz = parseFloat(satzInput);
    if (isNaN(satz)) { satz = 1.55; }
    const betrag = stunden * satz;
    document.getElementById("efzZuschlag").innerText = betrag.toFixed(2) + " €";
}

function berechneUrlaubZuschlag() {
    const stunden = parseFloat(document.getElementById("urlaubStunden").value) || 0;
    const satzInput = document.getElementById("urlaubSatz").value;
    let satz = parseFloat(satzInput);
    if (isNaN(satz)) { satz = 1.55; }
    const betrag = stunden * satz;
    document.getElementById("urlaubZuschlag").innerText = betrag.toFixed(2) + " €";
}
</script>
<div class="bereich" id="zuschlagZusammenfassung">
<h3>Zusammenfassung Zuschläge (ohne Monatsgehalt)</h3>
<div class="feld">
<strong>Summe aller Zuschläge und Zulagen:</strong>
<span id="zuschlagGesamt">–</span>
</div>
</div>
<script>
function berechneZuschlagsGesamtsumme() {
    const parse = id => parseFloat((document.getElementById(id)?.innerText || "0").replace(" €", "")) || 0;

    const summe =
        parse("zuschlagSumme") +         // Nacht, Samstag, Sonntag, Feiertag, 24./31.12
        parse("gesamtDiensteZuschlag") + // geteilte Dienste + Wegezeiten
        parse("schichtZuschlag") +       // Schichtform
        parse("dfZuschlag") +            // DF
        parse("efzZuschlag") +           // EFZ
        parse("urlaubZuschlag");         // Urlaub

    document.getElementById("zuschlagGesamt").innerText = summe.toFixed(2) + " €";
}
</script>
<div class="bereich" id="praemienBlock">
<h3>Prämien &amp; 13. Monatsgehalt</h3>
<div class="feld">
<label for="praemie">Summe Prämien (frei eintragbar):</label>
<input id="praemie" min="0" oninput="berechnePraemienBlock(); berechneZuschlagsGesamtsumme()" step="0.01" type="number"/>
<span id="praemieBetrag">–</span>
</div>
<div class="hinweis" style="font-size: 0.9em; color: #555; margin-top: 1em;">
        Das 13. Monatsgehalt wird zu 100 % vom letzten September-Brutto berechnet. 70 % werden ausgezahlt.
        Ab dem 11. Krankheitstag werden jeweils 0,4 % abgezogen.
    </div>
<div class="feld">
<label for="monatsgehalt13">13. Monatsgehalt (frei eintragbar):</label>
<input id="monatsgehalt13" min="0" oninput="berechnePraemienBlock(); berechneZuschlagsGesamtsumme()" step="0.01" type="number"/>
<span id="monats13Betrag">–</span>
</div>
</div>
<script>
function berechnePraemienBlock() {
    const praemie = parseFloat(document.getElementById("praemie").value) || 0;
    const monats13 = parseFloat(document.getElementById("monatsgehalt13").value) || 0;

    document.getElementById("praemieBetrag").innerText = praemie.toFixed(2) + " €";
    document.getElementById("monats13Betrag").innerText = monats13.toFixed(2) + " €";
}
</script>
<div class="bereich" id="gesamtbruttoBlock" style="background-color:#e0f2ff;">
<h3>Gesamt-Bruttobetrag</h3>
<button onclick="berechneGesamtbrutto()" style="background:#4CAF50; color:white; padding:10px; border:none; border-radius:5px; cursor:pointer;">
        Brutto berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Gesamtbrutto (Monatsgehalt + Zuschläge):</strong>
<span id="gesamtBrutto">–</span>
</div>
</div>
<script>
function berechneGesamtbrutto() {
    const parse = text => parseFloat(text.replace(" €", "").replace(",", ".")) || 0;

    const zuschlaege = parse(document.getElementById("zuschlagGesamt")?.innerText || "0");
    const praemie = parse(document.getElementById("praemieBetrag")?.innerText || "0");
    const monatsgehalt = parse(document.getElementById("monatsgehalt")?.innerText || "0");

    const gesamt = monatsgehalt + zuschlaege + praemie;
    document.getElementById("gesamtBrutto").innerText = gesamt.toFixed(2) + " €";
}
</script>
<div class="bereich" id="vlBlock">
<h3>Vermögenswirksame Leistungen (VL)</h3>
<div class="feld">
<label for="vlOption">Nehmen Sie VL in Anspruch?</label>
<select id="vlOption" onchange="aktualisiereVLBetrag()">
<option value="nein">Nein</option>
<option value="ja">Ja</option>
</select>
</div>
<div class="feld">
<label for="vlGesamt">VL-Betrag in Euro (Standard 40 €, wenn nicht geändert):</label>
<input id="vlGesamt" min="0" step="0.01" type="number" value="0.00"/>
</div>
<div class="feld">
<strong>Arbeitgeberzuschuss (wenn VL: +7 €):</strong>
<span id="vlZuschuss">–</span>
</div>
</div>
<script>
function aktualisiereVLBetrag() {
    const vlOption = document.getElementById("vlOption").value;
    const zuschussFeld = document.getElementById("vlZuschuss");

    if (vlOption === "ja") {
        zuschussFeld.innerText = "7.00 €";
    } else {
        zuschussFeld.innerText = "0.00 €";
    }
}
</script>
<div class="bereich" id="betriebsrenteBlock">
<h3>Betriebsrente</h3>
<p style="font-size: 0.9em; color: #555;">
        Die Betriebsrente wird auf Basis des Gesamtbruttos <strong>abzüglich VL-Zuschuss</strong> berechnet.<br/>
        Der Abzug beträgt <strong>2,2 %</strong> des bereinigten Bruttos.
    </p>
<button onclick="berechneBetriebsrente()" style="background:#007B9E; color:white; padding:10px; border:none; border-radius:5px; cursor:pointer;">
        Betriebsrente berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Abzug Betriebsrente:</strong> <span id="betragBetriebsrente">–</span>
</div>
</div>
<script>
function berechneBetriebsrente() {
    const bruttoText = document.getElementById("gesamtBrutto")?.innerText || "0";
    const brutto = parseFloat(bruttoText.replace(" €", "").replace(",", ".")) || 0;

    const vlZuschussText = document.getElementById("vlZuschuss")?.innerText || "0";
    const vlZuschuss = parseFloat(vlZuschussText.replace(" €", "").replace(",", ".")) || 0;

    const berechnungsgrundlage = brutto - vlZuschuss;
    const abzug = berechnungsgrundlage * 0.022;

    document.getElementById("betragBetriebsrente").innerText = abzug.toFixed(2) + " €";
}
</script>
<div class="bereich" id="jobradNeuBlock" style="background-color:#e0f7fa;">
<h3>Jobrad-Leasing (neu aufgebaut)</h3>
<p style="font-size: 0.9em; color: #555;">
        Berechnung: Gesamtbrutto – monatlicher Jobrad-Abzug + Arbeitgeberzuschuss
    </p>
<div class="feld">
<label for="jobradAbzug">Monatlicher Abzug für Jobrad (in €):</label>
<input id="jobradAbzug" step="0.01" type="number" value="0.00"/>
</div>
<div class="feld">
<label for="jobradAGZuschuss">Arbeitgeberzuschuss zum Jobrad (in €):</label>
<input id="jobradAGZuschuss" step="0.01" type="number" value="0.00"/>
</div>
<button onclick="berechneJobradNeu()" style="background:#0d47a1; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Bereinigtes Brutto berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Bereinigtes Brutto nach Jobrad-Leasing:</strong>
<span id="jobradNeuErgebnis">–</span>
</div>
</div>
<script>
function berechneJobradNeu() {
    const bruttoText = document.getElementById("gesamtBrutto")?.innerText || "0";
    const brutto = parseFloat(bruttoText.replace(" €", "").replace(",", ".")) || 0;

    const abzug = parseFloat(document.getElementById("jobradAbzug").value) || 0;
    const agZuschuss = parseFloat(document.getElementById("jobradAGZuschuss").value) || 0;

    const bereinigt = brutto - abzug + agZuschuss;
    document.getElementById("jobradNeuErgebnis").innerText = bereinigt.toFixed(2) + " €";
}
</script>
<div class="bereich" id="springerBlock" style="background-color:#e0f7fa;">
<h3>Springertätigkeit – Zuschläge aus anderer Eingruppierung</h3>
<div class="feld">
<label for="springerEG">Eingruppierung für Springertätigkeit:</label>
<select id="springerEG" onchange="setzeSpringerStundenlohn()">
<option value="">Bitte auswählen</option>
<option value="1/1">1/1</option><option value="1/2">1/2</option><option value="1/3">1/3</option>
<option value="2/1">2/1</option><option value="2/2">2/2</option><option value="2/3">2/3</option>
<option value="3/1">3/1</option><option value="3/2">3/2</option><option value="3/3">3/3</option>
<option value="4/1">4/1</option><option value="4/2">4/2</option><option value="4/3">4/3</option>
<option value="5/1">5/1</option><option value="5/2">5/2</option><option value="5/3">5/3</option>
<option value="6/1">6/1</option><option value="6/2">6/2</option><option value="6/3">6/3</option>
<option value="7/1">7/1</option><option value="7/2">7/2</option><option value="7/3">7/3</option>
<option value="8/1">8/1</option><option value="8/2">8/2</option><option value="8/3">8/3</option>
<option value="9/1">9/1</option><option value="9/2">9/2</option><option value="9/3">9/3</option>
<option value="10/1">10/1</option><option value="10/2">10/2</option><option value="10/3">10/3</option>
</select>
</div>
<div class="feld">
<label>Stunden Nachtarbeit:</label>
<input id="springerNacht" oninput="berechneSpringerZuschlaege()" step="0.1" type="number" value="0"/>
</div>
<div class="feld">
<label>Stunden Samstagsarbeit:</label>
<input id="springerSamstag" oninput="berechneSpringerZuschlaege()" step="0.1" type="number" value="0"/>
</div>
<div class="feld">
<label>Stunden Sonntagsarbeit:</label>
<input id="springerSonntag" oninput="berechneSpringerZuschlaege()" step="0.1" type="number" value="0"/>
</div>
<div class="feld">
<label>Stunden Feiertagsarbeit:</label>
<input id="springerFeiertag" oninput="berechneSpringerZuschlaege()" step="0.1" type="number" value="0"/>
</div>
<button onclick="berechneSpringerZuschlaege()" style="background:#d17d00; color:white; padding:10px; border:none; border-radius:5px; cursor:pointer;">Springerzuschläge berechnen</button>
<div class="feld">
<strong>Springer-Stundenlohn:</strong> <span id="springerStundenlohn"></span></div>
<div class="feld">
<strong>Springer-Zuschläge gesamt:</strong> <span id="springerZuschlaege"></span></div>
</div><script>
const springerLohnTabelle = {
  "1/1": 13.45, "1/2": 13.83, "1/3": 14.20,
  "2/1": 14.35, "2/2": 14.74, "2/3": 15.14,
  "3/1": 15.29, "3/2": 15.69, "3/3": 16.10,
  "4/1": 16.34, "4/2": 16.76, "4/3": 17.19,
  "5/1": 17.54, "5/2": 17.98, "5/3": 18.43,
  "6/1": 20.15, "6/2": 20.70, "6/3": 21.26,
  "7/1": 21.71, "7/2": 22.28, "7/3": 22.86,
  "8/1": 23.43, "8/2": 24.02, "8/3": 24.62,
  "9/1": 25.23, "9/2": 25.85, "9/3": 26.49,
  "10/1": 27.15, "10/2": 27.81, "10/3": 28.49
};

function setzeSpringerStundenlohn() {
  const eg = document.getElementById("springerEG").value;
  const lohn = springerLohnTabelle[eg] || 0;
  document.getElementById("springerStundenlohn").innerText = lohn.toFixed(2);
}

function berechneSpringerZuschlaege() {
  const lohn = parseFloat(document.getElementById("springerStundenlohn").innerText) || 0;
  const nacht = parseFloat(document.getElementById("springerNacht").value) || 0;
  const sonntag = parseFloat(document.getElementById("springerSonntag").value) || 0;
  const samstag = parseFloat(document.getElementById("springerSamstag").value) || 0;
  const feiertag = parseFloat(document.getElementById("springerFeiertag").value) || 0;

  const summe = nacht * lohn * 0.2 + samstag * lohn * 0.1 + sonntag * lohn * 0.3 + feiertag * lohn * 1.35;
  document.getElementById("springerZuschlaege").innerText = summe.toFixed(2);
}
</script>
<div class="bereich" id="springerSteuerfreiBlock" style="background-color:#e0f7fa;">
<h3>Steuerfreie Springerzuschläge (separat)</h3>
<p style="font-size: 0.9em; color: #555;">Berechnung erfolgt auf Grundlage des gewählten Springer-Stundenlohns.</p>
<button onclick="berechneSpringerSteuerfrei()" style="background:#455a64; color:white; padding:10px 20px; border:none; border-radius:5px;">Steuerfreie Anteile berechnen</button>
<div class="feld" style="margin-top:10px;">
<strong>Steuerfreier Springerbetrag (Summe):</strong> <span id="springerSteuerfrei">–</span>
</div>
</div>
<script>
function berechneSpringerSteuerfrei() {
  const lohn = parseFloat(document.getElementById("springerStundenlohn").innerText) || 0;
  const nacht = parseFloat(document.getElementById("springerNacht").value) || 0;
  const sonntag = parseFloat(document.getElementById("springerSonntag").value) || 0;
  const feiertag = parseFloat(document.getElementById("springerFeiertag").value) || 0;

  const betrag = nacht * lohn * 0.2 + sonntag * lohn * 0.3 + feiertag * lohn * 1.25;
  document.getElementById("springerSteuerfrei").innerText = betrag.toFixed(2) + " €";
}
</script>
<div class="bereich" id="bereinigtesBruttoBlock" style="background-color:#e0f7fa;">
<h3>Bereinigtes Brutto</h3>
<p style="font-size: 0.9em; color: #555;">
        Dieser Block summiert alle Zuschläge (inkl. Springertätigkeit) und berechnet das endgültige Bruttogehalt inkl. VL und ggf. Jobrad-Korrektur.
    </p>
<button onclick="berechneBereinigtesBrutto()" style="background:#2e7d32; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Bereinigtes Brutto berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Gesamtsumme Zuschläge inkl. Springer:</strong>
<span id="gesamtZulagen">–</span>
</div>
<div class="feld">
<strong>Bereinigtes Gesamtbrutto:</strong>
<span id="gesamtBereinigt">–</span>
</div>
</div>
<script>
function berechneBereinigtesBrutto() {
    const parse = text => parseFloat(text.replace(" €", "").replace(",", ".")) || 0;

    const zuschlagGesamt = parse(document.getElementById("zuschlagGesamt")?.innerText || "0");
    const springerZuschlag = parse(document.getElementById("springerZuschlaege")?.innerText || "0");
    const alleZulagen = zuschlagGesamt + springerZuschlag;
    document.getElementById("gesamtZulagen").innerText = alleZulagen.toFixed(2) + " €";

    const jobradBereinigt = parse(document.getElementById("jobradNeuErgebnis")?.innerText || "0");
    const jobradEingetragen = jobradBereinigt > 0;

    const bruttoBasis = jobradEingetragen
        ? jobradBereinigt
        : parse(document.getElementById("gesamtBrutto")?.innerText || "0");

    const vlZuschussText = document.getElementById("vlZuschuss")?.innerText || "0";
    const vlZuschuss = parse(vlZuschussText);
    const vlOption = document.getElementById("vlOption")?.value || "nein";
    const vlBonus = (vlOption === "ja") ? 7.00 : 0;

    const bereinigt = bruttoBasis + vlBonus;

    document.getElementById("gesamtBereinigt").innerText = bereinigt.toFixed(2) + " €";
}
</script>
<div class="bereich" id="steuerfreiHauptBlock" style="background-color:#e0f7fa;">
<h3>Steuerfreie Zuschläge – Haupttätigkeit</h3>
<p style="font-size: 0.9em; color: #555;">
        Berechnung basiert auf den Eingaben aus dem regulären Zuschlagsblock.
    </p>
<button onclick="berechneSteuerfreiHaupt()" style="background:#37474f; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Steuerfreie Zuschläge berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Steuerfreie Zuschläge (Haupttätigkeit):</strong>
<span id="steuerfreiHauptErgebnis">–</span>
</div>
</div>
<script>
function berechneSteuerfreiHaupt() {
    const parse = id => parseFloat(document.getElementById(id)?.value) || 0;
    const lohn = parseFloat(document.getElementById("stundenlohn")?.innerText.replace(" €", "").replace(",", ".")) || 0;

    const nacht = parse("nachtstunden");         // 20 %
    const sonntag = parse("sonntagstunden");     // 30 %
    const dez = parse("dezstunden");             // 100 %
    const feiertag = parse("feiertagstunden");   // 125 %

    const betrag =
        nacht * lohn * 0.2 +
        sonntag * lohn * 0.3 +
        dez * lohn * 1.0 +
        feiertag * lohn * 1.25;

    document.getElementById("steuerfreiHauptErgebnis").innerText = betrag.toFixed(2) + " €";
}
</script>
<div class="bereich" id="steuerpflichtigBruttoBlock" style="background-color:#e0f7fa;">
<h3>Steuerpflichtiges Brutto</h3>
<p style="font-size: 0.9em; color: #555;">
        Berechnet sich aus: Bereinigtes Brutto – steuerfreie Hauptzuschläge – steuerfreie Springerzuschläge
    </p>
<button onclick="berechneSteuerpflichtigBrutto()" style="background:#b71c1c; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Steuerpflichtiges Brutto berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Steuerpflichtiges Brutto:</strong>
<span id="steuerpflichtigBrutto">–</span>
</div>
</div>
<script>
function berechneSteuerpflichtigBrutto() {
    const parse = text => parseFloat((text || "0").replace(" €", "").replace(",", ".")) || 0;

    const bruttoBereinigt = parse(document.getElementById("gesamtBereinigt")?.innerText || "0");
    const jobradBereinigt = parse(document.getElementById("jobradNeuErgebnis")?.innerText || "0");
    const steuerfreiHaupt = parse(document.getElementById("steuerfreiHauptErgebnis")?.innerText || "0");
    const steuerfreiSpringer = parse(document.getElementById("springerSteuerfrei")?.innerText || "0");

    const bruttoVerwendet = jobradBereinigt > 0 ? jobradBereinigt : bruttoBereinigt;
    const steuerpflichtig = bruttoVerwendet - steuerfreiHaupt - steuerfreiSpringer;

    document.getElementById("steuerpflichtigBrutto").innerText = steuerpflichtig.toFixed(2) + " €";
}
</script>
<div class="bereich" id="soliBlock">
<h3>Solidaritätszuschlag – Berücksichtigung</h3>
<p style="font-size: 0.9em; color: #555;">
    Der Solidaritätszuschlag entfällt in der Regel bei einem Jahresbrutto unter ca. <strong>74.000 €</strong> (für Ledige).
    Bitte geben Sie an, ob der Soli <strong>für Sie fällig</strong> ist. Diese Angabe beeinflusst die Netto-Berechnung.
  </p>
<div class="feld">
<label for="soliPflicht">Soli fällig?</label>
<select id="soliPflicht">
<option value="nein">Nein (unter 74.000 €/Jahr)</option>
<option value="ja">Ja (über 74.000 €/Jahr)</option>
</select>
</div>
</div><div class="bereich" id="steuerdatenBlock">
<h3>Steuerdaten eingeben</h3>
<div class="feld">
<label for="steuerklasse">Steuerklasse:</label>
<select id="steuerklasse">
<option value="">Bitte auswählen</option>
<option value="1">Steuerklasse I</option>
<option value="2">Steuerklasse II</option>
<option value="3">Steuerklasse III</option>
<option value="4">Steuerklasse IV</option>
<option value="5">Steuerklasse V</option>
<option value="6">Steuerklasse VI</option>
</select>
</div>
<div class="feld">
<label for="bundesland">Bundesland:</label>
<select id="bundesland">
<option value="">Bitte auswählen</option>
<option value="BW">Baden-Württemberg</option>
<option value="BY">Bayern</option>
<option value="BE">Berlin</option>
<option value="BB">Brandenburg</option>
<option value="HB">Bremen</option>
<option value="HH">Hamburg</option>
<option value="HE">Hessen</option>
<option value="MV">Mecklenburg-Vorpommern</option>
<option value="NI">Niedersachsen</option>
<option value="NW">Nordrhein-Westfalen</option>
<option value="RP">Rheinland-Pfalz</option>
<option value="SL">Saarland</option>
<option value="SN">Sachsen</option>
<option value="ST">Sachsen-Anhalt</option>
<option value="SH">Schleswig-Holstein</option>
<option value="TH">Thüringen</option>
</select>
</div>
<div class="feld">
<label for="kinderfreibetrag">Kinderfreibeträge (z. B. 0,5):</label>
<input id="kinderfreibetrag" min="0" step="0.5" type="number" value="0"/>
</div>
<div class="feld">
<label for="kirchensteuer">Kirchensteuerpflichtig?</label>
<select id="kirchensteuer">
<option value="ja">Ja</option>
<option value="nein">Nein</option>
</select>
</div>
</div><script>
function berechneNetto() {
  const parse = id => parseFloat(document.getElementById(id)?.innerText) || 0;
  const brutto = parse("bereinigtBrutto");
  const steuerklasse = document.getElementById("steuerklasse")?.value || "1";
  const kinder = parseFloat(document.getElementById("kinderfreibetrag")?.value) || 0;
  const kirche = document.getElementById("kirchensteuer")?.value || "nein";
  const soliStatus = document.getElementById("soliPflicht")?.value || "nein";

  // Beispielhafte einfache Berechnung – Platzhalter
  let lohnsteuer = brutto * 0.15;
  let soli = soliStatus === "ja" ? lohnsteuer * 0.055 : 0;
  let kirchensteuer = kirche === "ja" ? lohnsteuer * 0.09 : 0;

  document.getElementById("lohnsteuer").innerText = lohnsteuer.toFixed(2);
  document.getElementById("soli").innerText = soli.toFixed(2);
  document.getElementById("kirchensteuerBetrag").innerText = kirchensteuer.toFixed(2);

  const netto = brutto - lohnsteuer - soli - kirchensteuer;
  document.getElementById("nettoExakt").innerText = netto.toFixed(2);

  const vlAbzug = parseFloat(document.getElementById("vlGesamt")?.value) || 0;
  const nettoNachVL = netto - vlAbzug;
  document.getElementById("nettoNachVL").innerText = nettoNachVL.toFixed(2);

  const betriebsrente = parse("betragBetriebsrente");
  const nettoNachVLBR = nettoNachVL - betriebsrente;
  document.getElementById("nettoNachVLBR").innerText = nettoNachVLBR.toFixed(2);


}
</script>
<div class="bereich" id="nettoBlock">
<h3>Netto-Berechnung (vereinfacht)</h3><p style="font-size: 0.9em; color: #b71c1c;">Hinweis: In diesem Nettobetrag sind weder vermögenswirksame Leistungen noch die ZVK/Betriebsrente berücksichtigt.</p>
<p style="font-size: 0.9em; color: #555;">Nimmt pauschale Steuer- und Sozialabgabensätze an.</p>
<div class="feld">
<label for="pflegeKinderlos">Pflegeversicherung: kinderlos?</label>
<select id="pflegeKinderlos">
<option value="nein">Nein</option>
<option value="ja">Ja</option>
</select>
</div>
<button onclick="berechneNetto()" style="background:#1b5e20; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Netto berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Abzüge insgesamt:</strong> <span id="abzuegeNetto">–</span>
</div>
<div class="feld">
<strong>Netto-Betrag:</strong> <span id="nettoErgebnis">–</span>
</div>
</div>
<script>
function berechneNetto() {
    const parse = txt => parseFloat((txt || "0").replace(" €", "").replace(",", ".")) || 0;

    const brutto = parse(document.getElementById("steuerpflichtigBrutto")?.innerText || "0");

    const klasse = document.getElementById("steuerklasse")?.value || "1";
    const kirche = document.getElementById("kirchensteuer")?.value || "nein";
    const pflege = document.getElementById("pflegeKinderlos")?.value || "nein";
    const soli = document.getElementById("soliOption")?.value || "nein";

    // Pauschale Steuerklassensätze
    const steuerSatz = {
        "1": 0.14,
        "2": 0.12,
        "3": 0.09,
        "4": 0.13,
        "5": 0.20,
        "6": 0.25
    }[klasse] || 0.14;

    const lohnsteuer = brutto * steuerSatz;
    const kirchensteuer = (kirche === "ja") ? lohnsteuer * 0.09 : 0;
    const soliZuschlag = (soli === "ja" && brutto > 6500) ? lohnsteuer * 0.055 : 0;

    // Sozialabgaben
    const renten = brutto * 0.093;
    const kranken = brutto * 0.089;
    const arbeit = brutto * 0.012;
    const pflegeV = brutto * (pflege === "ja" ? 0.01925 : 0.01525);

    const gesamtAbzug = lohnsteuer + kirchensteuer + soliZuschlag + renten + kranken + arbeit + pflegeV;
    const netto = brutto - gesamtAbzug;

    document.getElementById("abzuegeNetto").innerText = gesamtAbzug.toFixed(2) + " €";
    document.getElementById("nettoErgebnis").innerText = netto.toFixed(2) + " €";
}
</script>
<div class="bereich" id="abzugsBlock" style="background-color:#e0f7fa;">
<h3>Detaillierte Abzüge &amp; endgültiges Netto</h3>
<p style="font-size: 0.9em; color: #555;">
        Die Werte basieren auf dem steuerpflichtigen Brutto, VL-Abzug (40 €) und Betriebsrentenwert.
    </p>
<div class="feld">
<label for="pflegeKinderlosFinal">Pflegeversicherung: kinderlos?</label>
<select id="pflegeKinderlosFinal">
<option value="nein">Nein</option>
<option value="ja">Ja</option>
</select>
</div>
<button onclick="berechneAbzuegeDetail()" style="background:#263238; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Detaillierte Abzüge berechnen
    </button>
<div class="feld" style="margin-top:15px;">
<details>
<summary><strong>Aufschlüsselung anzeigen</strong></summary>
<ul style="list-style:none; padding-left:0;">
<li>Lohnsteuer (pauschal): <span id="abzDetailLohnsteuer">–</span></li>
<li>Kirchensteuer: <span id="abzDetailKirche">–</span></li>
<li>Solizuschlag: <span id="abzDetailSoli">–</span></li>
<li>Rentenversicherung: <span id="abzDetailRente">–</span></li>
<li>Krankenversicherung: <span id="abzDetailKV">–</span></li>
<li>Arbeitslosenversicherung: <span id="abzDetailAV">–</span></li>
<li>Pflegeversicherung: <span id="abzDetailPV">–</span></li>
<li>VL-Abzug (falls „ja“): <span id="abzDetailVL">–</span></li>
<li>Betriebsrente: <span id="abzDetailRenteBetrieb">–</span></li>
</ul>
</details>
</div>
<div class="feld">
<strong>Endgültiges Netto (vereinfacht):</strong> <span id="endNettoErgebnis">–</span>
</div>
</div>
<script>
function berechneAbzuegeDetail() {
    const parse = txt => parseFloat((txt || "0").replace(" €", "").replace(",", ".")) || 0;

    const brutto = parse(document.getElementById("steuerpflichtigBrutto")?.innerText || "0");
    const klasse = document.getElementById("steuerklasse")?.value || "1";
    const kirche = document.getElementById("kirchensteuer")?.value || "nein";
    const soli = document.getElementById("soliOption")?.value || "nein";
    const pflege = document.getElementById("pflegeKinderlosFinal")?.value || "nein";

    const vlOption = document.getElementById("vlOption")?.value || "nein";
    const vlAbzug = (vlOption === "ja") ? 40.00 : 0.00;
    const renteBetrieb = parse(document.getElementById("betragBetriebsrente")?.innerText || "0");

    const steuerSatz = {
        "1": 0.14, "2": 0.12, "3": 0.09,
        "4": 0.13, "5": 0.20, "6": 0.25
    }[klasse] || 0.14;

    const lohnsteuer = brutto * steuerSatz;
    const kirchensteuer = (kirche === "ja") ? lohnsteuer * 0.09 : 0;
    const soliZuschlag = (soli === "ja" && brutto > 6500) ? lohnsteuer * 0.055 : 0;
    const renten = brutto * 0.093;
    const kranken = brutto * 0.089;
    const arbeit = brutto * 0.012;
    const pflegeV = brutto * (pflege === "ja" ? 0.01925 : 0.01525);

    const abzugSumme = lohnsteuer + kirchensteuer + soliZuschlag + renten + kranken + arbeit + pflegeV + vlAbzug + renteBetrieb;
    const nettoEnd = brutto - abzugSumme;

    // Anzeige
    document.getElementById("abzDetailLohnsteuer").innerText = lohnsteuer.toFixed(2) + " €";
    document.getElementById("abzDetailKirche").innerText = kirchensteuer.toFixed(2) + " €";
    document.getElementById("abzDetailSoli").innerText = soliZuschlag.toFixed(2) + " €";
    document.getElementById("abzDetailRente").innerText = renten.toFixed(2) + " €";
    document.getElementById("abzDetailKV").innerText = kranken.toFixed(2) + " €";
    document.getElementById("abzDetailAV").innerText = arbeit.toFixed(2) + " €";
    document.getElementById("abzDetailPV").innerText = pflegeV.toFixed(2) + " €";
    document.getElementById("abzDetailVL").innerText = vlAbzug.toFixed(2) + " €";
    document.getElementById("abzDetailRenteBetrieb").innerText = renteBetrieb.toFixed(2) + " €";
    document.getElementById("endNettoErgebnis").innerText = nettoEnd.toFixed(2) + " €";
}
</script>
<script>
window.onload = function() {
    if (typeof berechneZuschlagGesamt === "function") berechneZuschlagGesamt();
    if (typeof berechneBereinigtesBrutto === "function") berechneBereinigtesBrutto();
    if (typeof berechneSteuerpflichtigBrutto === "function") berechneSteuerpflichtigBrutto();
    if (typeof berechneAbzuegeDetail === "function") berechneAbzuegeDetail();
};
</script>
<div style="margin-top: 40px; padding: 20px; border-top: 2px solid #ccc; text-align: center;">
<button onclick="resetFormulare()" style="background-color:#c62828; color:white; border:none; padding:12px 24px; font-size:1em; border-radius:6px; margin: 0 10px;">
    Alle Eingaben löschen
  </button>
<button onclick="window.print()" style="background-color:#0277bd; color:white; border:none; padding:12px 24px; font-size:1em; border-radius:6px; margin: 0 10px;">
  Als PDF speichern
</button>
<button onclick="mailtoExport()" style="background-color:#00695c; color:white; border:none; padding:12px 24px; font-size:1em; border-radius:6px; margin: 0 10px;">
  Ergebnis per Outlook senden
</button>
<script>
function mailtoExport() {
  const body = encodeURIComponent(
    "Hiermit sende ich mein Ergebnis aus dem Brutto-/Netto-Rechner auf Grundlage des TVN-Thüringen.%0D%0A%0D%0ABitte beachten Sie, dass die vollständigen Werte im PDF-Dokument enthalten sind."
  );
  window.location.href = "mailto:?subject=Nettolohn-Ergebnis TVN&body=" + body;
}
</script>
</div>
<script>
function resetFormulare() {
  document.querySelectorAll("input[type='number'], select").forEach(el => {
    if (el.tagName === "SELECT") {
      el.selectedIndex = 0;
    } else {
      el.value = "";
    }
  });

  // Leere alle Ergebnisfelder (Spans)
  document.querySelectorAll("span").forEach(span => {
    span.innerText = "–";
  });
}
</script>
<div style="margin-top: 40px; padding: 20px; border-top: 2px solid #ccc;">
<button onclick="exportiereText()" style="background-color:#455a64; color:white; border:none; padding:12px 24px; font-size:1em; border-radius:6px;">
    Alle berechneten Werte als Text anzeigen
  </button>
<textarea id="exportTextfeld" style="width:100%; height:240px; margin-top:16px; display:none; font-family:monospace; font-size:0.95em;"></textarea>
</div>
<script>
function exportiereText() {
  const parse = id => {
    const el = document.getElementById(id);
    return el ? el.innerText.trim() : "–";
  };

  const text = [
    "Berechnungsergebnis (TVN Thüringen):",
    "------------------------------------",
    "Gesamt-Brutto: " + parse("gesamtBrutto"),
    "Bereinigtes Brutto: " + parse("gesamtBereinigt"),
    "Steuerfreie Zuschläge (Haupttätigkeit): " + parse("steuerfreiHauptErgebnis"),
    "Steuerfreie Springerzuschläge: " + parse("springerSteuerfrei"),
    "Steuerpflichtiges Brutto: " + parse("steuerpflichtigBrutto"),
    "",
    "Lohnsteuer: " + parse("abzDetailLohnsteuer"),
    "Kirchensteuer: " + parse("abzDetailKirche"),
    "Soli: " + parse("abzDetailSoli"),
    "Rente: " + parse("abzDetailRente"),
    "KV: " + parse("abzDetailKV"),
    "AV: " + parse("abzDetailAV"),
    "PV: " + parse("abzDetailPV"),
    "VL-Abzug: " + parse("abzDetailVL"),
    "Betriebsrente: " + parse("abzDetailRenteBetrieb"),
    "",
    "Endgültiges Netto: " + parse("endNettoErgebnis")
  ].join("\n");

  const feld = document.getElementById("exportTextfeld");
  feld.style.display = "block";
  feld.value = text;
  feld.select();
}
</script>

<script>
let deferredPrompt;
window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;
    document.getElementById("installBanner").style.display = "block";
});

function installPWA() {
    if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then(() => {
            deferredPrompt = null;
            document.getElementById("installBanner").style.display = "none";
        });
    }
}
</script>
<div id="installBanner" style="display:none; position:fixed; bottom:0; left:0; right:0; background:#01579b; color:white; padding:16px; text-align:center; font-family:sans-serif; z-index:9999;">
<span>App installieren?</span>
<button onclick="installPWA()" style="margin-left:12px; background:#ffffff; color:#01579b; border:none; padding:8px 16px; font-weight:bold; border-radius:4px;">Installieren</button>
</div>
</body>
</html>
