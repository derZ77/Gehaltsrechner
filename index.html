
<!DOCTYPE html>

<html lang="de">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8"/>
<title>Brutto-Netto Rechner ‚Äì Eingruppierung &amp; Zuschlags√§tze</title>
<style>
        body {
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
            color: #222;
        }
        .bereich {
            background-color: #ffffff;
            border-radius: 10px;
            padding: 20px;
            margin: 20px auto;
            max-width: 900px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .feld {
            margin-bottom: 15px;
        }
        .feld label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        .wertanzeige {
            font-size: 1.2em;
            font-weight: bold;
        }
        select {
            padding: 8px 12px;
            width: 100%;
            max-width: 420px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 1em;
        }
        h3 {
            color: #155724;
            font-size: 1.4em;
            margin-top: 0;
        }
    
.bereich {
    border: 2px solid #37474f;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    background-color: #fafafa;
}
.bereich h3 {
    margin-top: 0;
    color: #0d47a1;
}

/* Eingabefelder modernisieren */
input[type="number"], select {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 6px;
    width: 100%;
    box-sizing: border-box;
    font-size: 1em;
    transition: border 0.2s ease;
}
input[type="number"]:focus, select:focus {
    border-color: #0288d1;
    outline: none;
}

/* Farbleiste oben */
body::before {
    content: "";
    display: block;
    width: 100%;
    height: 6px;
    background: linear-gradient(to right, #0288d1, #00acc1);
    margin-bottom: 16px;
}
</style>
<style>
@media print {
  button, select, input[type="number"], details > summary {
    display: none !important;
  }
  body {
    margin: 0;
    padding: 0;
    font-size: 11pt;
  }
  .bereich {
    page-break-inside: avoid;
    border: 1px solid #ccc !important;
    background: white !important;
    box-shadow: none !important;
  }
}
</style>
</head>
<body>
<style>
#overlayHinweis {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.7);
  z-index: 99999;
  display: flex;
  align-items: center;
  justify-content: center;
}
#overlayHinweis .inhalt {
  background: white;
  padding: 30px;
  border-radius: 10px;
  max-width: 600px;
  font-family: sans-serif;
  box-shadow: 0 0 10px black;
  text-align: left;
  font-size: 16px;
}
#overlayHinweis button {
  margin-top: 20px;
  padding: 10px 20px;
  background: #0288d1;
  color: white;
  font-weight: bold;
  border: none;
  border-radius: 5px;
}
</style>
<div id="overlayHinweis" style="display:none;">
<div class="inhalt">
<h3>Hinweise / Instructions / –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</h3>
<ul>
<li>
<strong>üá©üá™ Deutsch:</strong> Bitte Stundenangaben in <em>Dezimalform</em> eingeben (z.‚ÄØB. 2.5 f√ºr zweieinhalb Stunden).<br/>
        Ung√ºltige Eingaben (z.‚ÄØB. Buchstaben) werden <strong>rot umrandet</strong>.<br/>
        Beim Tippen erscheint eine <strong>gelbe Hinweisbox</strong>.
      </li><br/>
<li>
<strong>üá¨üáß English:</strong> Please enter time values in <em>decimal format</em> (e.g., 2.5 means two and a half hours).<br/>
        Invalid inputs (e.g., letters) are <strong>highlighted in red</strong>.<br/>
        A <strong>yellow help box</strong> appears when entering values.
      </li><br/>
<li>
<strong>üá∑üá∫ –†—É—Å—Å–∫–∏–π:</strong> –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–æ–¥–∏—Ç–µ —á–∞—Å—ã –≤ <em>–¥–µ—Å—è—Ç–∏—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ</em> (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2.5 –æ–∑–Ω–∞—á–∞–µ—Ç –¥–≤–∞ —Å –ø–æ–ª–æ–≤–∏–Ω–æ–π —á–∞—Å–∞).<br/>
        –ù–µ–≤–µ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±—É–∫–≤—ã) <strong>–≤—ã–¥–µ–ª—è—é—Ç—Å—è –∫—Ä–∞—Å–Ω–æ–π —Ä–∞–º–∫–æ–π</strong>.<br/>
        –ü—Ä–∏ –≤–≤–æ–¥–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è <strong>–∂—ë–ª—Ç–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞</strong>.
      </li>
</ul>
<button onclick="schliesseOverlay()">OK</button>
</div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
  document.getElementById("overlayHinweis").style.display = "flex";
});
</script>
<div style="background-color: #01579b; color: white; padding: 12px 24px; font-size: 1.3em; font-weight: bold; font-family: sans-serif;">
  Rechner f√ºr Nettolohn auf Grundlage des TVN-Th√ºringen
</div>
<div class="bereich" id="eingruppierungBlock" style="background-color:#e0f7fa;">
<h3>Eingruppierung</h3>
<div class="feld">
<label for="egSelect">Bitte Ihre Eingruppierung ausw√§hlen:</label>
<select id="egSelect" onchange="zeigeEingruppierungWerte()">
<option value="">‚Äì bitte ausw√§hlen ‚Äì</option>
<option value="1/1">1/1</option><option value="1/2">1/2</option><option value="1/3">1/3</option><option value="2/1">2/1</option><option value="2/2">2/2</option><option value="2/3">2/3</option><option value="3/1">3/1</option><option value="3/2">3/2</option><option value="3/3">3/3</option><option value="4/1">4/1</option><option value="4/2">4/2</option><option value="4/3">4/3</option><option value="5/1">5/1</option><option value="5/2">5/2</option><option value="5/3">5/3</option><option value="6/1">6/1</option><option value="6/2">6/2</option><option value="6/3">6/3</option><option value="7/1">7/1</option><option value="7/2">7/2</option><option value="7/3">7/3</option><option value="8/1">8/1</option><option value="8/2">8/2</option><option value="8/3">8/3</option><option value="9/1">9/1</option><option value="9/2">9/2</option><option value="9/3">9/3</option>
</select>
</div>
<div class="feld">
<label>Monatsgehalt:</label>
<div class="wertanzeige" id="monatsgehalt">‚Äì</div>
</div>
<div class="feld">
<label>Stundenlohn:</label>
<div class="wertanzeige" id="stundenlohn">‚Äì</div>
</div>
</div>
<div class="bereich" id="zuschlagssaetzeBlock">
<h3>Zuschlags√§tze (aus Stundenlohn berechnet)</h3>
<div class="feld"><label>Samstag (10‚ÄØ%):</label><div class="wertanzeige" id="satzSamstag">‚Äì</div></div>
<div class="feld"><label>Nacht (20‚ÄØ%):</label><div class="wertanzeige" id="satzNacht">‚Äì</div></div>
<div class="feld"><label>Sonntag (30‚ÄØ%):</label><div class="wertanzeige" id="satzSonntag">‚Äì</div></div>
<div class="feld"><label>Feiertag (135‚ÄØ%):</label><div class="wertanzeige" id="satzFeiertag">‚Äì</div></div>
<div class="feld"><label>24./31.12 (100‚ÄØ%):</label><div class="wertanzeige" id="satzDez">‚Äì</div></div>
</div>
<script>
        const egTabelle = {
            "1/1": [2632.44, 13.21], "1/2": [2819.78, 13.50], "1/3": [3007.14, 13.78],
            "2/1": [2901.60, 17.56], "2/2": [3122.68, 18.90], "2/3": [3344.45, 20.24],
            "3/1": [3023.86, 18.30], "3/2": [3260.41, 19.73], "3/3": [3495.54, 21.16],
            "4/1": [3182.71, 19.60], "4/2": [3438.92, 20.81], "4/3": [3695.83, 22.37],
            "5/1": [3246.04, 19.65], "5/2": [3510.08, 21.24], "5/3": [3774.13, 22.84],
            "6/1": [3329.58, 20.15], "6/2": [3604.06, 21.81], "6/3": [3878.54, 23.47],
            "7/1": [3512.98, 21.26], "7/2": [3810.68, 23.06], "7/3": [4106.94, 24.86],
            "8/1": [3659.85, 22.15], "8/2": [3975.83, 24.06], "8/3": [4293.18, 25.98],
            "9/1": [3917.08, 23.71], "9/2": [4263.23, 25.80], "9/3": [4612.93, 27.92]
        };

        function zeigeEingruppierungWerte() {
            const auswahl = document.getElementById("egSelect").value;
            const lohnfeld = document.getElementById("stundenlohn");
            const gehaltfeld = document.getElementById("monatsgehalt");

            if (egTabelle[auswahl]) {
                const gehalt = egTabelle[auswahl][0];
                const lohn = egTabelle[auswahl][1];
                gehaltfeld.innerText = gehalt.toFixed(2) + " ‚Ç¨";
                lohnfeld.innerText = lohn.toFixed(2) + " ‚Ç¨";

                document.getElementById("satzSamstag").innerText = (lohn * 0.10).toFixed(2) + " ‚Ç¨";
                document.getElementById("satzNacht").innerText = (lohn * 0.20).toFixed(2) + " ‚Ç¨";
                document.getElementById("satzSonntag").innerText = (lohn * 0.30).toFixed(2) + " ‚Ç¨";
                document.getElementById("satzFeiertag").innerText = (lohn * 1.35).toFixed(2) + " ‚Ç¨";
                document.getElementById("satzDez").innerText = (lohn * 1.00).toFixed(2) + " ‚Ç¨";
            } else {
                gehaltfeld.innerText = "‚Äì";
                lohnfeld.innerText = "‚Äì";
                document.getElementById("satzSamstag").innerText = "‚Äì";
                document.getElementById("satzNacht").innerText = "‚Äì";
                document.getElementById("satzSonntag").innerText = "‚Äì";
                document.getElementById("satzFeiertag").innerText = "‚Äì";
                document.getElementById("satzDez").innerText = "‚Äì";
            }
        }
    </script>
<div class="bereich" id="zuschlaegeBlock">
<h3>Zuschl√§ge</h3>
<div class="feld">
<label for="nachtstunden">Nachtstunden (20‚ÄØ%):</label>
<input id="nachtstunden" min="0" oninput="berechneZuschlaege(); berechneZuschlagsGesamtsumme()" title="Geben Sie hier die Anzahl Ihrer Nachtarbeitsstunden ein." type="number"/>
</div>
<div class="feld">
<label for="samstagstunden">Samstagsstunden (10‚ÄØ%):</label>
<input id="samstagstunden" min="0" oninput="berechneZuschlaege(); berechneZuschlagsGesamtsumme()" title="Tragen Sie hier die Samstagsstunden ein." type="number"/>
</div>
<div class="feld">
<label for="sonntagstunden">Sonntagsstunden (30‚ÄØ%):</label>
<input id="sonntagstunden" min="0" oninput="berechneZuschlaege(); berechneZuschlagsGesamtsumme()" title="Tragen Sie hier die Sonntagsstunden ein." type="number"/>
</div>
<div class="feld">
<label for="feiertagstunden">Feiertagsstunden (135‚ÄØ%):</label>
<input id="feiertagstunden" min="0" oninput="berechneZuschlaege(); berechneZuschlagsGesamtsumme()" title="Anzahl gearbeiteter Feiertagsstunden." type="number"/>
</div>
<div class="feld">
<label for="dezstunden">24./31.12 Stunden ab 14‚ÄØUhr (100‚ÄØ%):</label>
<input id="dezstunden" min="0" oninput="berechneZuschlaege(); berechneZuschlagsGesamtsumme()" title="Stunden an 24.12. oder 31.12. ab 14 Uhr." type="number"/>
<small>Achtung: Zuschlag nur ab 14 Uhr bis 24 Uhr</small>
</div>
<div class="feld">
<strong>Summe Zuschl√§ge:</strong> <span id="zuschlagSumme">‚Äì</span>
</div>
</div>
<script>
function berechneZuschlaege() {
    const lohnText = document.getElementById("stundenlohn").innerText.replace(" ‚Ç¨", "").replace(",", ".");
    const stundenlohn = parseFloat(lohnText);

    if (isNaN(stundenlohn)) {
        document.getElementById("zuschlagSumme").innerText = "‚Äì";
        return;
    }

    const nacht = parseFloat(document.getElementById("nachtstunden").value) || 0;
    const samstag = parseFloat(document.getElementById("samstagstunden").value) || 0;
    const sonntag = parseFloat(document.getElementById("sonntagstunden").value) || 0;
    const feiertag = parseFloat(document.getElementById("feiertagstunden").value) || 0;
    const dez = parseFloat(document.getElementById("dezstunden").value) || 0;

    const summe =
        nacht * stundenlohn * 0.20 +
        samstag * stundenlohn * 0.10 +
        sonntag * stundenlohn * 0.30 +
        feiertag * stundenlohn * 1.35 +
        dez * stundenlohn * 1.00;

    document.getElementById("zuschlagSumme").innerText = summe.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="diensteWegeBlock">
<h3>Zuschl√§ge f√ºr geteilte Dienste &amp; Wegezeit</h3>
<div class="feld">
<label for="geteilteDienste">Anzahl geteilte Dienste (je 15‚ÄØ‚Ç¨):</label>
<input id="geteilteDienste" min="0" oninput="berechneDiensteZuschlaege(); berechneZuschlagsGesamtsumme()" title="Eingeben, wie oft Sie geteilte Dienste hatten." type="number"/>
<span id="betragGeteilt">‚Äì</span>
</div>
<div class="feld">
<label for="wegeDienste">Anzahl Dienste mit Wegezeiten (je 6‚ÄØ‚Ç¨):</label>
<input id="wegeDienste" min="0" oninput="berechneDiensteZuschlaege(); berechneZuschlagsGesamtsumme()" title="Eingeben, wie viele Wegezeitdienste Sie geleistet haben." type="number"/>
<span id="betragWege">‚Äì</span>
</div>
<div class="feld">
<strong>Gesamt Zuschl√§ge (geteilt &amp; Wege):</strong>
<span id="gesamtDiensteZuschlag">‚Äì</span>
</div>
</div>
<script>
function berechneDiensteZuschlaege() {
    const geteilt = parseInt(document.getElementById("geteilteDienste").value) || 0;
    const wege = parseInt(document.getElementById("wegeDienste").value) || 0;

    const summeGeteilt = geteilt * 15;
    const summeWege = wege * 6;
    const gesamt = summeGeteilt + summeWege;

    document.getElementById("betragGeteilt").innerText = summeGeteilt.toFixed(2) + " ‚Ç¨";
    document.getElementById("betragWege").innerText = summeWege.toFixed(2) + " ‚Ç¨";
    document.getElementById("gesamtDiensteZuschlag").innerText = gesamt.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="schichtformBlock">
<h3>Schichtform</h3>
<div class="feld">
<label for="schichtform">Bitte w√§hlen Sie Ihre Schichtform:</label>
<select id="schichtform" onchange="berechneSchichtform()">
<option value="0">Keine Schicht</option>
<option value="50">Schicht</option>
<option value="110">Wechselschicht</option>
</select>
</div>
<div class="feld">
<strong>Zuschlag Schichtform:</strong> <span id="schichtZuschlag">‚Äì</span>
</div>
</div>
<script>
function berechneSchichtform() {
    const betrag = parseFloat(document.getElementById("schichtform").value) || 0;
    document.getElementById("schichtZuschlag").innerText = betrag.toFixed(2) + " ‚Ç¨";
    berechneZuschlagsGesamtsumme();
}
</script>
<div class="bereich" id="dfBlock">
<h3>Dienstfrei an Feiertagen (DF)</h3>
<div class="feld">
<label for="dfStunden">Anzahl Stunden DF:</label>
<input id="dfStunden" min="0" oninput="berechneDFZuschlag(); berechneZuschlagsGesamtsumme()" step="0.1" title="Wie viele Stunden DF (Dienstfrei an Feiertagen)?" type="number"/>
</div>
<div class="feld">
<label for="dfSatz">Optionaler Stundensatz (leer = 1,55‚ÄØ‚Ç¨):</label>
<input id="dfSatz" min="0" oninput="berechneDFZuschlag(); berechneZuschlagsGesamtsumme()" step="0.01" title="Optional: Eigener Zuschlagssatz je DF-Stunde." type="number"/>
</div>
<div class="feld">
<strong>Zuschlag f√ºr DF:</strong> <span id="dfZuschlag">‚Äì</span>
</div>
</div>
<div class="bereich" id="efzBlock">
<h3>Entgeltfortzahlung (z.‚ÄØB. bei Krankheit)</h3>
<div class="feld">
<label for="efzStunden">Anzahl Stunden:</label>
<input id="efzStunden" min="0" oninput="berechneEFZZuschlag(); berechneZuschlagsGesamtsumme()" step="0.1" title="Stunden w√§hrend Entgeltfortzahlung (z.B. Krankheit)." type="number"/>
</div>
<div class="feld">
<label for="efzSatz">Optionaler Stundensatz (leer = 1,55‚ÄØ‚Ç¨):</label>
<input id="efzSatz" min="0" oninput="berechneEFZZuschlag(); berechneZuschlagsGesamtsumme()" step="0.01" title="Optional: Eigener Satz pro EFZ-Stunde." type="number"/>
</div>
<div class="feld">
<strong>Zuschlag EFZ:</strong> <span id="efzZuschlag">‚Äì</span>
</div>
</div>
<div class="bereich" id="urlaubBlock">
<h3>Urlaubsdurchschnitt</h3>
<div class="feld">
<label for="urlaubStunden">Anzahl Stunden:</label>
<input id="urlaubStunden" min="0" oninput="berechneUrlaubZuschlag(); berechneZuschlagsGesamtsumme()" step="0.1" title="Urlaubsstunden f√ºr Zuschlagsberechnung." type="number"/>
</div>
<div class="feld">
<label for="urlaubSatz">Optionaler Stundensatz (leer = 1,55‚ÄØ‚Ç¨):</label>
<input id="urlaubSatz" min="0" oninput="berechneUrlaubZuschlag(); berechneZuschlagsGesamtsumme()" step="0.01" title="Optionaler Satz je Urlaubsstunde." type="number"/>
</div>
<div class="feld">
<strong>Zuschlag Urlaub:</strong> <span id="urlaubZuschlag">‚Äì</span>
</div>
</div>
<script>
function berechneDFZuschlag() {
    const stunden = parseFloat(document.getElementById("dfStunden").value) || 0;
    const satzInput = document.getElementById("dfSatz").value;
    let satz = parseFloat(satzInput);
    if (isNaN(satz)) { satz = 1.55; }
    const betrag = stunden * satz;
    document.getElementById("dfZuschlag").innerText = betrag.toFixed(2) + " ‚Ç¨";
}

function berechneEFZZuschlag() {
    const stunden = parseFloat(document.getElementById("efzStunden").value) || 0;
    const satzInput = document.getElementById("efzSatz").value;
    let satz = parseFloat(satzInput);
    if (isNaN(satz)) { satz = 1.55; }
    const betrag = stunden * satz;
    document.getElementById("efzZuschlag").innerText = betrag.toFixed(2) + " ‚Ç¨";
}

function berechneUrlaubZuschlag() {
    const stunden = parseFloat(document.getElementById("urlaubStunden").value) || 0;
    const satzInput = document.getElementById("urlaubSatz").value;
    let satz = parseFloat(satzInput);
    if (isNaN(satz)) { satz = 1.55; }
    const betrag = stunden * satz;
    document.getElementById("urlaubZuschlag").innerText = betrag.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="zuschlagZusammenfassung">
<h3>Zusammenfassung Zuschl√§ge (ohne Monatsgehalt)</h3>
<div class="feld">
<strong>Summe aller Zuschl√§ge und Zulagen:</strong>
<span id="zuschlagGesamt">‚Äì</span>
</div>
</div>
<script>
function berechneZuschlagsGesamtsumme() {
    const parse = id => parseFloat((document.getElementById(id)?.innerText || "0").replace(" ‚Ç¨", "")) || 0;

    const summe =
        parse("zuschlagSumme") +         // Nacht, Samstag, Sonntag, Feiertag, 24./31.12
        parse("gesamtDiensteZuschlag") + // geteilte Dienste + Wegezeiten
        parse("schichtZuschlag") +       // Schichtform
        parse("dfZuschlag") +            // DF
        parse("efzZuschlag") +           // EFZ
        parse("urlaubZuschlag");         // Urlaub

    document.getElementById("zuschlagGesamt").innerText = summe.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="praemienBlock">
<h3>Pr√§mien &amp; 13. Monatsgehalt</h3>
<div class="feld">
<label for="praemie">Summe Pr√§mien (frei eintragbar):</label>
<input id="praemie" min="0" oninput="berechnePraemienBlock(); berechneZuschlagsGesamtsumme()" step="0.01" title="Tragen Sie hier Ihre erhaltenen Pr√§mien ein." type="number"/>
<span id="praemieBetrag">‚Äì</span>
</div>
<div class="hinweis" style="font-size: 0.9em; color: #555; margin-top: 1em;">
        Das 13. Monatsgehalt wird zu 100‚ÄØ% vom letzten September-Brutto berechnet. 70‚ÄØ% werden ausgezahlt.
        Ab dem 11. Krankheitstag werden jeweils 0,4‚ÄØ% abgezogen.
    </div>
<div class="feld">
<label for="monatsgehalt13">13. Monatsgehalt (frei eintragbar):</label>
<input id="monatsgehalt13" min="0" oninput="berechnePraemienBlock(); berechneZuschlagsGesamtsumme()" step="0.01" title="Angabe zum 13. Monatsgehalt (Bruttobetrag)." type="number"/>
<span id="monats13Betrag">‚Äì</span>
</div>
</div>
<script>
function berechnePraemienBlock() {
    const praemie = parseFloat(document.getElementById("praemie").value) || 0;
    const monats13 = parseFloat(document.getElementById("monatsgehalt13").value) || 0;

    document.getElementById("praemieBetrag").innerText = praemie.toFixed(2) + " ‚Ç¨";
    document.getElementById("monats13Betrag").innerText = monats13.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="gesamtbruttoBlock" style="background-color:#e0f2ff;">
<h3>Gesamt-Bruttobetrag</h3>
<button onclick="berechneGesamtbrutto()" style="background:#4CAF50; color:white; padding:10px; border:none; border-radius:5px; cursor:pointer;">
        Brutto berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Gesamtbrutto (Monatsgehalt + Zuschl√§ge):</strong>
<span id="gesamtBrutto">‚Äì</span>
</div>
</div>
<script>
function berechneGesamtbrutto() {
    const parse = text => parseFloat(text.replace(" ‚Ç¨", "").replace(",", ".")) || 0;

    const zuschlaege = parse(document.getElementById("zuschlagGesamt")?.innerText || "0");
    const praemie = parse(document.getElementById("praemieBetrag")?.innerText || "0");
    const monatsgehalt = parse(document.getElementById("monatsgehalt")?.innerText || "0");

    const gesamt = monatsgehalt + zuschlaege + praemie;
    document.getElementById("gesamtBrutto").innerText = gesamt.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="vlBlock">
<h3>Verm√∂genswirksame Leistungen (VL)</h3>
<div class="feld">
<label for="vlOption">Nehmen Sie VL in Anspruch?</label>
<select id="vlOption" onchange="aktualisiereVLBetrag()">
<option value="nein">Nein</option>
<option value="ja">Ja</option>
</select>
</div>
<div class="feld">
<label for="vlGesamt">VL-Betrag in Euro (Standard 40‚ÄØ‚Ç¨, wenn nicht ge√§ndert):</label>
<input id="vlGesamt" min="0" step="0.01" title="H√∂he der verm√∂genswirksamen Leistungen." type="number" value="0.00"/>
</div>
<div class="feld">
<strong>Arbeitgeberzuschuss (wenn VL: +7‚ÄØ‚Ç¨):</strong>
<span id="vlZuschuss">‚Äì</span>
</div>
</div>
<script>
function aktualisiereVLBetrag() {
    const vlOption = document.getElementById("vlOption").value;
    const zuschussFeld = document.getElementById("vlZuschuss");

    if (vlOption === "ja") {
        zuschussFeld.innerText = "7.00 ‚Ç¨";
    } else {
        zuschussFeld.innerText = "0.00 ‚Ç¨";
    }
}
</script>
<div class="bereich" id="betriebsrenteBlock">
<h3>Betriebsrente</h3>
<p style="font-size: 0.9em; color: #555;">
        Die Betriebsrente wird auf Basis des Gesamtbruttos <strong>abz√ºglich VL-Zuschuss</strong> berechnet.<br/>
        Der Abzug betr√§gt <strong>2,2‚ÄØ%</strong> des bereinigten Bruttos.
    </p>
<button onclick="berechneBetriebsrente()" style="background:#007B9E; color:white; padding:10px; border:none; border-radius:5px; cursor:pointer;">
        Betriebsrente berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Abzug Betriebsrente:</strong> <span id="betragBetriebsrente">‚Äì</span>
</div>
</div>
<script>
function berechneBetriebsrente() {
    const bruttoText = document.getElementById("gesamtBrutto")?.innerText || "0";
    const brutto = parseFloat(bruttoText.replace(" ‚Ç¨", "").replace(",", ".")) || 0;

    const vlZuschussText = document.getElementById("vlZuschuss")?.innerText || "0";
    const vlZuschuss = parseFloat(vlZuschussText.replace(" ‚Ç¨", "").replace(",", ".")) || 0;

    const berechnungsgrundlage = brutto - vlZuschuss;
    const abzug = berechnungsgrundlage * 0.022;

    document.getElementById("betragBetriebsrente").innerText = abzug.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="jobradNeuBlock" style="background-color:#e0f7fa;">
<h3>Jobrad-Leasing (neu aufgebaut)</h3>
<p style="font-size: 0.9em; color: #555;">
        Berechnung: Gesamtbrutto ‚Äì monatlicher Jobrad-Abzug + Arbeitgeberzuschuss
    </p>
<div class="feld">
<label for="jobradAbzug">Monatlicher Abzug f√ºr Jobrad (in ‚Ç¨):</label>
<input id="jobradAbzug" step="0.01" title="Monatlicher Abzug f√ºr Jobrad-Leasing." type="number" value="0.00"/>
</div>
<div class="feld">
<label for="jobradAGZuschuss">Arbeitgeberzuschuss zum Jobrad (in ‚Ç¨):</label>
<input id="jobradAGZuschuss" step="0.01" title="Arbeitgeberzuschuss zum Jobrad-Leasing." type="number" value="0.00"/>
</div>
<button onclick="berechneJobradNeu()" style="background:#0d47a1; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Bereinigtes Brutto berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Bereinigtes Brutto nach Jobrad-Leasing:</strong>
<span id="jobradNeuErgebnis">‚Äì</span>
</div>
</div>
<script>
function berechneJobradNeu() {
    const bruttoText = document.getElementById("gesamtBrutto")?.innerText || "0";
    const brutto = parseFloat(bruttoText.replace(" ‚Ç¨", "").replace(",", ".")) || 0;

    const abzug = parseFloat(document.getElementById("jobradAbzug").value) || 0;
    const agZuschuss = parseFloat(document.getElementById("jobradAGZuschuss").value) || 0;

    const bereinigt = brutto - abzug + agZuschuss;
    document.getElementById("jobradNeuErgebnis").innerText = bereinigt.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="springerBlock" style="background-color:#e0f7fa;">
<h3>Springert√§tigkeit ‚Äì Zuschl√§ge aus anderer Eingruppierung</h3>
<div class="feld">
<label for="springerEG">Eingruppierung f√ºr Springert√§tigkeit:</label>
<select id="springerEG" onchange="setzeSpringerStundenlohn()">
<option value="">Bitte ausw√§hlen</option>
<option value="1/1">1/1</option><option value="1/2">1/2</option><option value="1/3">1/3</option>
<option value="2/1">2/1</option><option value="2/2">2/2</option><option value="2/3">2/3</option>
<option value="3/1">3/1</option><option value="3/2">3/2</option><option value="3/3">3/3</option>
<option value="4/1">4/1</option><option value="4/2">4/2</option><option value="4/3">4/3</option>
<option value="5/1">5/1</option><option value="5/2">5/2</option><option value="5/3">5/3</option>
<option value="6/1">6/1</option><option value="6/2">6/2</option><option value="6/3">6/3</option>
<option value="7/1">7/1</option><option value="7/2">7/2</option><option value="7/3">7/3</option>
<option value="8/1">8/1</option><option value="8/2">8/2</option><option value="8/3">8/3</option>
<option value="9/1">9/1</option><option value="9/2">9/2</option><option value="9/3">9/3</option>
<option value="10/1">10/1</option><option value="10/2">10/2</option><option value="10/3">10/3</option>
</select>
</div>
<div class="feld">
<label>Stunden Nachtarbeit:</label>
<input id="springerNacht" oninput="berechneSpringerZuschlaege()" step="0.1" title="Nachtarbeitsstunden aus Springert√§tigkeit." type="number" value="0"/>
</div>
<div class="feld">
<label>Stunden Samstagsarbeit:</label>
<input id="springerSamstag" oninput="berechneSpringerZuschlaege()" step="0.1" title="Springer-Eins√§tze an Samstagen." type="number" value="0"/>
</div>
<div class="feld">
<label>Stunden Sonntagsarbeit:</label>
<input id="springerSonntag" oninput="berechneSpringerZuschlaege()" step="0.1" title="Springer-Eins√§tze an Sonntagen." type="number" value="0"/>
</div>
<div class="feld">
<label>Stunden Feiertagsarbeit:</label>
<input id="springerFeiertag" oninput="berechneSpringerZuschlaege()" step="0.1" title="Feiertagseins√§tze als Springer." type="number" value="0"/>
</div>
<button onclick="berechneSpringerZuschlaege()" style="background:#d17d00; color:white; padding:10px; border:none; border-radius:5px; cursor:pointer;">Springerzuschl√§ge berechnen</button>
<div class="feld">
<strong>Springer-Stundenlohn:</strong> <span id="springerStundenlohn"></span></div>
<div class="feld">
<strong>Springer-Zuschl√§ge gesamt:</strong> <span id="springerZuschlaege"></span></div>
</div><script>
const springerLohnTabelle = {
  "1/1": 13.45, "1/2": 13.83, "1/3": 14.20,
  "2/1": 14.35, "2/2": 14.74, "2/3": 15.14,
  "3/1": 15.29, "3/2": 15.69, "3/3": 16.10,
  "4/1": 16.34, "4/2": 16.76, "4/3": 17.19,
  "5/1": 17.54, "5/2": 17.98, "5/3": 18.43,
  "6/1": 20.15, "6/2": 20.70, "6/3": 21.26,
  "7/1": 21.71, "7/2": 22.28, "7/3": 22.86,
  "8/1": 23.43, "8/2": 24.02, "8/3": 24.62,
  "9/1": 25.23, "9/2": 25.85, "9/3": 26.49,
  "10/1": 27.15, "10/2": 27.81, "10/3": 28.49
};

function setzeSpringerStundenlohn() {
  const eg = document.getElementById("springerEG").value;
  const lohn = springerLohnTabelle[eg] || 0;
  document.getElementById("springerStundenlohn").innerText = lohn.toFixed(2);
}

function berechneSpringerZuschlaege() {
  const lohn = parseFloat(document.getElementById("springerStundenlohn").innerText) || 0;
  const nacht = parseFloat(document.getElementById("springerNacht").value) || 0;
  const sonntag = parseFloat(document.getElementById("springerSonntag").value) || 0;
  const samstag = parseFloat(document.getElementById("springerSamstag").value) || 0;
  const feiertag = parseFloat(document.getElementById("springerFeiertag").value) || 0;

  const summe = nacht * lohn * 0.2 + samstag * lohn * 0.1 + sonntag * lohn * 0.3 + feiertag * lohn * 1.35;
  document.getElementById("springerZuschlaege").innerText = summe.toFixed(2);
}
</script>
<div class="bereich" id="springerSteuerfreiBlock" style="background-color:#e0f7fa;">
<h3>Steuerfreie Springerzuschl√§ge (separat)</h3>
<p style="font-size: 0.9em; color: #555;">Berechnung erfolgt auf Grundlage des gew√§hlten Springer-Stundenlohns.</p>
<button onclick="berechneSpringerSteuerfrei()" style="background:#455a64; color:white; padding:10px 20px; border:none; border-radius:5px;">Steuerfreie Anteile berechnen</button>
<div class="feld" style="margin-top:10px;">
<strong>Steuerfreier Springerbetrag (Summe):</strong> <span id="springerSteuerfrei">‚Äì</span>
</div>
</div>
<script>
function berechneSpringerSteuerfrei() {
  const lohn = parseFloat(document.getElementById("springerStundenlohn").innerText) || 0;
  const nacht = parseFloat(document.getElementById("springerNacht").value) || 0;
  const sonntag = parseFloat(document.getElementById("springerSonntag").value) || 0;
  const feiertag = parseFloat(document.getElementById("springerFeiertag").value) || 0;

  const betrag = nacht * lohn * 0.2 + sonntag * lohn * 0.3 + feiertag * lohn * 1.25;
  document.getElementById("springerSteuerfrei").innerText = betrag.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="bereinigtesBruttoBlock" style="background-color:#e0f7fa;">
<h3>Bereinigtes Brutto</h3>
<p style="font-size: 0.9em; color: #555;">
        Dieser Block summiert alle Zuschl√§ge (inkl. Springert√§tigkeit) und berechnet das endg√ºltige Bruttogehalt inkl. VL und ggf. Jobrad-Korrektur.
    </p>
<button onclick="berechneBereinigtesBrutto()" style="background:#2e7d32; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Bereinigtes Brutto berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Gesamtsumme Zuschl√§ge inkl. Springer:</strong>
<span id="gesamtZulagen">‚Äì</span>
</div>
<div class="feld">
<strong>Bereinigtes Gesamtbrutto:</strong>
<span id="gesamtBereinigt">‚Äì</span>
</div>
</div>
<script>
function berechneBereinigtesBrutto() {
    const parse = text => parseFloat(text.replace(" ‚Ç¨", "").replace(",", ".")) || 0;

    const zuschlagGesamt = parse(document.getElementById("zuschlagGesamt")?.innerText || "0");
    const springerZuschlag = parse(document.getElementById("springerZuschlaege")?.innerText || "0");
    const alleZulagen = zuschlagGesamt + springerZuschlag;
    document.getElementById("gesamtZulagen").innerText = alleZulagen.toFixed(2) + " ‚Ç¨";

    const jobradBereinigt = parse(document.getElementById("jobradNeuErgebnis")?.innerText || "0");
    const jobradEingetragen = jobradBereinigt > 0;

    const bruttoBasis = jobradEingetragen
        ? jobradBereinigt
        : parse(document.getElementById("gesamtBrutto")?.innerText || "0");

    const vlZuschussText = document.getElementById("vlZuschuss")?.innerText || "0";
    const vlZuschuss = parse(vlZuschussText);
    const vlOption = document.getElementById("vlOption")?.value || "nein";
    const vlBonus = (vlOption === "ja") ? 7.00 : 0;

    const bereinigt = bruttoBasis + vlBonus;

    document.getElementById("gesamtBereinigt").innerText = bereinigt.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="steuerfreiHauptBlock" style="background-color:#e0f7fa;">
<h3>Steuerfreie Zuschl√§ge ‚Äì Hauptt√§tigkeit</h3>
<p style="font-size: 0.9em; color: #555;">
        Berechnung basiert auf den Eingaben aus dem regul√§ren Zuschlagsblock.
    </p>
<button onclick="berechneSteuerfreiHaupt()" style="background:#37474f; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Steuerfreie Zuschl√§ge berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Steuerfreie Zuschl√§ge (Hauptt√§tigkeit):</strong>
<span id="steuerfreiHauptErgebnis">‚Äì</span>
</div>
</div>
<script>
function berechneSteuerfreiHaupt() {
    const parse = id => parseFloat(document.getElementById(id)?.value) || 0;
    const lohn = parseFloat(document.getElementById("stundenlohn")?.innerText.replace(" ‚Ç¨", "").replace(",", ".")) || 0;

    const nacht = parse("nachtstunden");         // 20 %
    const sonntag = parse("sonntagstunden");     // 30 %
    const dez = parse("dezstunden");             // 100 %
    const feiertag = parse("feiertagstunden");   // 125 %

    const betrag =
        nacht * lohn * 0.2 +
        sonntag * lohn * 0.3 +
        dez * lohn * 1.0 +
        feiertag * lohn * 1.25;

    document.getElementById("steuerfreiHauptErgebnis").innerText = betrag.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="steuerpflichtigBruttoBlock" style="background-color:#e0f7fa;">
<h3>Steuerpflichtiges Brutto</h3>
<p style="font-size: 0.9em; color: #555;">
        Berechnet sich aus: Bereinigtes Brutto ‚Äì steuerfreie Hauptzuschl√§ge ‚Äì steuerfreie Springerzuschl√§ge
    </p>
<button onclick="berechneSteuerpflichtigBrutto()" style="background:#b71c1c; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Steuerpflichtiges Brutto berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Steuerpflichtiges Brutto:</strong>
<span id="steuerpflichtigBrutto">‚Äì</span>
</div>
</div>
<script>
function berechneSteuerpflichtigBrutto() {
    const parse = text => parseFloat((text || "0").replace(" ‚Ç¨", "").replace(",", ".")) || 0;

    const bruttoBereinigt = parse(document.getElementById("gesamtBereinigt")?.innerText || "0");
    const jobradBereinigt = parse(document.getElementById("jobradNeuErgebnis")?.innerText || "0");
    const steuerfreiHaupt = parse(document.getElementById("steuerfreiHauptErgebnis")?.innerText || "0");
    const steuerfreiSpringer = parse(document.getElementById("springerSteuerfrei")?.innerText || "0");

    const bruttoVerwendet = jobradBereinigt > 0 ? jobradBereinigt : bruttoBereinigt;
    const steuerpflichtig = bruttoVerwendet - steuerfreiHaupt - steuerfreiSpringer;

    document.getElementById("steuerpflichtigBrutto").innerText = steuerpflichtig.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="soliBlock">
<h3>Solidarit√§tszuschlag ‚Äì Ber√ºcksichtigung</h3>
<p style="font-size: 0.9em; color: #555;">
    Der Solidarit√§tszuschlag entf√§llt in der Regel bei einem Jahresbrutto unter ca. <strong>74.000‚ÄØ‚Ç¨</strong> (f√ºr Ledige).
    Bitte geben Sie an, ob der Soli <strong>f√ºr Sie f√§llig</strong> ist. Diese Angabe beeinflusst die Netto-Berechnung.
  </p>
<div class="feld">
<label for="soliPflicht">Soli f√§llig?</label>
<select id="soliPflicht">
<option value="nein">Nein (unter 74.000‚ÄØ‚Ç¨/Jahr)</option>
<option value="ja">Ja (√ºber 74.000‚ÄØ‚Ç¨/Jahr)</option>
</select>
</div>
</div><div class="bereich" id="steuerdatenBlock">
<h3>Steuerdaten eingeben</h3>
<div class="feld">
<label for="steuerklasse">Steuerklasse:</label>
<select id="steuerklasse">
<option value="">Bitte ausw√§hlen</option>
<option value="1">Steuerklasse I</option>
<option value="2">Steuerklasse II</option>
<option value="3">Steuerklasse III</option>
<option value="4">Steuerklasse IV</option>
<option value="5">Steuerklasse V</option>
<option value="6">Steuerklasse VI</option>
</select>
</div>
<div class="feld">
<label for="bundesland">Bundesland:</label>
<select id="bundesland">
<option value="">Bitte ausw√§hlen</option>
<option value="BW">Baden-W√ºrttemberg</option>
<option value="BY">Bayern</option>
<option value="BE">Berlin</option>
<option value="BB">Brandenburg</option>
<option value="HB">Bremen</option>
<option value="HH">Hamburg</option>
<option value="HE">Hessen</option>
<option value="MV">Mecklenburg-Vorpommern</option>
<option value="NI">Niedersachsen</option>
<option value="NW">Nordrhein-Westfalen</option>
<option value="RP">Rheinland-Pfalz</option>
<option value="SL">Saarland</option>
<option value="SN">Sachsen</option>
<option value="ST">Sachsen-Anhalt</option>
<option value="SH">Schleswig-Holstein</option>
<option value="TH">Th√ºringen</option>
</select>
</div>
<div class="feld">
<label for="kinderfreibetrag">Kinderfreibetr√§ge (z.‚ÄØB. 0,5):</label>
<input id="kinderfreibetrag" min="0" step="0.5" title="Geben Sie z.‚ÄØB. 0,5 f√ºr ein Kind an." type="number" value="0"/>
</div>
<div class="feld">
<label for="kirchensteuer">Kirchensteuerpflichtig?</label>
<select id="kirchensteuer">
<option value="ja">Ja</option>
<option value="nein">Nein</option>
</select>
</div>
</div><script>
function berechneNetto() {
  const parse = id => parseFloat(document.getElementById(id)?.innerText) || 0;
  const brutto = parse("bereinigtBrutto");
  const steuerklasse = document.getElementById("steuerklasse")?.value || "1";
  const kinder = parseFloat(document.getElementById("kinderfreibetrag")?.value) || 0;
  const kirche = document.getElementById("kirchensteuer")?.value || "nein";
  const soliStatus = document.getElementById("soliPflicht")?.value || "nein";

  // Beispielhafte einfache Berechnung ‚Äì Platzhalter
  let lohnsteuer = brutto * 0.15;
  let soli = soliStatus === "ja" ? lohnsteuer * 0.055 : 0;
  let kirchensteuer = kirche === "ja" ? lohnsteuer * 0.09 : 0;

  document.getElementById("lohnsteuer").innerText = lohnsteuer.toFixed(2);
  document.getElementById("soli").innerText = soli.toFixed(2);
  document.getElementById("kirchensteuerBetrag").innerText = kirchensteuer.toFixed(2);

  const netto = brutto - lohnsteuer - soli - kirchensteuer;
  document.getElementById("nettoExakt").innerText = netto.toFixed(2);

  const vlAbzug = parseFloat(document.getElementById("vlGesamt")?.value) || 0;
  const nettoNachVL = netto - vlAbzug;
  document.getElementById("nettoNachVL").innerText = nettoNachVL.toFixed(2);

  const betriebsrente = parse("betragBetriebsrente");
  const nettoNachVLBR = nettoNachVL - betriebsrente;
  document.getElementById("nettoNachVLBR").innerText = nettoNachVLBR.toFixed(2);


}
</script>
<div class="bereich" id="nettoBlock">
<h3>Netto-Berechnung (vereinfacht)</h3><p style="font-size: 0.9em; color: #b71c1c;">Hinweis: In diesem Nettobetrag sind weder verm√∂genswirksame Leistungen noch die ZVK/Betriebsrente ber√ºcksichtigt.</p>
<p style="font-size: 0.9em; color: #555;">Nimmt pauschale Steuer- und Sozialabgabens√§tze an.</p>
<div class="feld">
<label for="pflegeKinderlos">Pflegeversicherung: kinderlos?</label>
<select id="pflegeKinderlos">
<option value="nein">Nein</option>
<option value="ja">Ja</option>
</select>
</div>
<button onclick="berechneNetto()" style="background:#1b5e20; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Netto berechnen
    </button>
<div class="feld" style="margin-top:10px;">
<strong>Abz√ºge insgesamt:</strong> <span id="abzuegeNetto">‚Äì</span>
</div>
<div class="feld">
<strong>Netto-Betrag:</strong> <span id="nettoErgebnis">‚Äì</span>
</div>
</div>
<script>
function berechneNetto() {
    const parse = txt => parseFloat((txt || "0").replace(" ‚Ç¨", "").replace(",", ".")) || 0;

    const brutto = parse(document.getElementById("steuerpflichtigBrutto")?.innerText || "0");

    const klasse = document.getElementById("steuerklasse")?.value || "1";
    const kirche = document.getElementById("kirchensteuer")?.value || "nein";
    const pflege = document.getElementById("pflegeKinderlos")?.value || "nein";
    const soli = document.getElementById("soliOption")?.value || "nein";

    // Pauschale Steuerklassens√§tze
    const steuerSatz = {
        "1": 0.14,
        "2": 0.12,
        "3": 0.09,
        "4": 0.13,
        "5": 0.20,
        "6": 0.25
    }[klasse] || 0.14;

    const lohnsteuer = brutto * steuerSatz;
    const kirchensteuer = (kirche === "ja") ? lohnsteuer * 0.09 : 0;
    const soliZuschlag = (soli === "ja" && brutto > 6500) ? lohnsteuer * 0.055 : 0;

    // Sozialabgaben
    const renten = brutto * 0.093;
    const kranken = brutto * 0.089;
    const arbeit = brutto * 0.012;
    const pflegeV = brutto * (pflege === "ja" ? 0.01925 : 0.01525);

    const gesamtAbzug = lohnsteuer + kirchensteuer + soliZuschlag + renten + kranken + arbeit + pflegeV;
    const netto = brutto - gesamtAbzug;

    document.getElementById("abzuegeNetto").innerText = gesamtAbzug.toFixed(2) + " ‚Ç¨";
    document.getElementById("nettoErgebnis").innerText = netto.toFixed(2) + " ‚Ç¨";
}
</script>
<div class="bereich" id="abzugsBlock" style="background-color:#e0f7fa;">
<h3>Detaillierte Abz√ºge &amp; endg√ºltiges Netto</h3>
<p style="font-size: 0.9em; color: #555;">
        Die Werte basieren auf dem steuerpflichtigen Brutto, VL-Abzug (40‚ÄØ‚Ç¨) und Betriebsrentenwert.
    </p>
<div class="feld">
<label for="pflegeKinderlosFinal">Pflegeversicherung: kinderlos?</label>
<select id="pflegeKinderlosFinal">
<option value="nein">Nein</option>
<option value="ja">Ja</option>
</select>
</div>
<button onclick="berechneAbzuegeDetail()" style="background:#263238; color:white; padding:10px 20px; border:none; border-radius:5px;">
        Detaillierte Abz√ºge berechnen
    </button>
<div class="feld" style="margin-top:15px;">
<details>
<summary><strong>Aufschl√ºsselung anzeigen</strong></summary>
<ul style="list-style:none; padding-left:0;">
<li>Lohnsteuer (pauschal): <span id="abzDetailLohnsteuer">‚Äì</span></li>
<li>Kirchensteuer: <span id="abzDetailKirche">‚Äì</span></li>
<li>Solizuschlag: <span id="abzDetailSoli">‚Äì</span></li>
<li>Rentenversicherung: <span id="abzDetailRente">‚Äì</span></li>
<li>Krankenversicherung: <span id="abzDetailKV">‚Äì</span></li>
<li>Arbeitslosenversicherung: <span id="abzDetailAV">‚Äì</span></li>
<li>Pflegeversicherung: <span id="abzDetailPV">‚Äì</span></li>
<li>VL-Abzug (falls ‚Äûja‚Äú): <span id="abzDetailVL">‚Äì</span></li>
<li>Betriebsrente: <span id="abzDetailRenteBetrieb">‚Äì</span></li>
</ul>
</details>
</div>
<div class="feld">
<strong>Endg√ºltiges Netto (vereinfacht):</strong> <span id="endNettoErgebnis">‚Äì</span>
</div>
<div style="margin-top:15px; background-color:#fff9c4; padding:12px; border-left:5px solid #fbc02d; font-weight:bold; color:#0d47a1;">Hinweis: In diesem Nettobetrag wurden die steuerfreien Zuschl√§ge aus Haupt- und Springert√§tigkeit wieder hinzugerechnet.</div></div>
<script>
function berechneAbzuegeDetail() {
    const parse = txt => parseFloat((txt || "0").replace(" ‚Ç¨", "").replace(",", ".")) || 0;

    const brutto = parse(document.getElementById("steuerpflichtigBrutto")?.innerText || "0");
    const klasse = document.getElementById("steuerklasse")?.value || "1";
    const kirche = document.getElementById("kirchensteuer")?.value || "nein";
    const soli = document.getElementById("soliOption")?.value || "nein";
    const pflege = document.getElementById("pflegeKinderlosFinal")?.value || "nein";

    const vlOption = document.getElementById("vlOption")?.value || "nein";
    
    let vlEingabe = parseFloat(document.getElementById("vlGesamt")?.value || "0");
    if (vlOption === "ja") {
        if (isNaN(vlEingabe) || vlEingabe <= 0) {
            vlEingabe = 7.00;
        }
    } else {
        vlEingabe = 0.00;
    }
    const vlAbzug = vlEingabe;

    const renteBetrieb = parse(document.getElementById("betragBetriebsrente")?.innerText || "0");

    const steuerSatz = {
        "1": 0.14, "2": 0.12, "3": 0.09,
        "4": 0.13, "5": 0.20, "6": 0.25
    }[klasse] || 0.14;

    const lohnsteuer = brutto * steuerSatz;
    const kirchensteuer = (kirche === "ja") ? lohnsteuer * 0.09 : 0;
    const soliZuschlag = (soli === "ja" && brutto > 6500) ? lohnsteuer * 0.055 : 0;
    const renten = brutto * 0.093;
    const kranken = brutto * 0.089;
    const arbeit = brutto * 0.012;
    const pflegeV = brutto * (pflege === "ja" ? 0.01925 : 0.01525);

    const abzugSumme = lohnsteuer + kirchensteuer + soliZuschlag + renten + kranken + arbeit + pflegeV + vlAbzug + renteBetrieb;
    
    const steuerfreiHaupt = parseFloat((document.getElementById("steuerfreiHauptErgebnis")?.innerText || "0").replace(" ‚Ç¨", "").replace(",", ".")) || 0;
    const steuerfreiSpringer = parseFloat((document.getElementById("springerSteuerfrei")?.innerText || "0").replace(" ‚Ç¨", "").replace(",", ".")) || 0;
    const nettoEnd = brutto - abzugSumme + steuerfreiHaupt + steuerfreiSpringer;


    // Anzeige
    document.getElementById("abzDetailLohnsteuer").innerText = lohnsteuer.toFixed(2) + " ‚Ç¨";
    document.getElementById("abzDetailKirche").innerText = kirchensteuer.toFixed(2) + " ‚Ç¨";
    document.getElementById("abzDetailSoli").innerText = soliZuschlag.toFixed(2) + " ‚Ç¨";
    document.getElementById("abzDetailRente").innerText = renten.toFixed(2) + " ‚Ç¨";
    document.getElementById("abzDetailKV").innerText = kranken.toFixed(2) + " ‚Ç¨";
    document.getElementById("abzDetailAV").innerText = arbeit.toFixed(2) + " ‚Ç¨";
    document.getElementById("abzDetailPV").innerText = pflegeV.toFixed(2) + " ‚Ç¨";
    document.getElementById("abzDetailVL").innerText = vlAbzug.toFixed(2) + " ‚Ç¨";
    document.getElementById("abzDetailRenteBetrieb").innerText = renteBetrieb.toFixed(2) + " ‚Ç¨";
    document.getElementById("endNettoErgebnis").innerText = nettoEnd.toFixed(2) + " ‚Ç¨";
}
</script>
<script>
window.onload = function() {
    if (typeof berechneZuschlagGesamt === "function") berechneZuschlagGesamt();
    if (typeof berechneBereinigtesBrutto === "function") berechneBereinigtesBrutto();
    if (typeof berechneSteuerpflichtigBrutto === "function") berechneSteuerpflichtigBrutto();
    if (typeof berechneAbzuegeDetail === "function") berechneAbzuegeDetail();
};
</script>
<div style="margin-top: 40px; padding: 20px; border-top: 2px solid #ccc; text-align: center;">
<button onclick="resetFormulare()" style="background-color:#c62828; color:white; border:none; padding:12px 24px; font-size:1em; border-radius:6px; margin: 0 10px;">
    Alle Eingaben l√∂schen
  </button>
<button onclick="window.print()" style="background-color:#0277bd; color:white; border:none; padding:12px 24px; font-size:1em; border-radius:6px; margin: 0 10px;">
  Als PDF speichern
</button>
<button onclick="mailtoExport()" style="background-color:#00695c; color:white; border:none; padding:12px 24px; font-size:1em; border-radius:6px; margin: 0 10px;">
  Ergebnis per Outlook senden
</button>
<script>
function mailtoExport() {
  const body = encodeURIComponent(
    "Hiermit sende ich mein Ergebnis aus dem Brutto-/Netto-Rechner auf Grundlage des TVN-Th√ºringen.%0D%0A%0D%0ABitte beachten Sie, dass die vollst√§ndigen Werte im PDF-Dokument enthalten sind."
  );
  window.location.href = "mailto:?subject=Nettolohn-Ergebnis TVN&body=" + body;
}
</script>
</div>
<script>
function resetFormulare() {
  document.querySelectorAll("input[type='number'], select").forEach(el => {
    if (el.tagName === "SELECT") {
      el.selectedIndex = 0;
    } else {
      el.value = "";
    }
  });

  // Leere alle Ergebnisfelder (Spans)
  document.querySelectorAll("span").forEach(span => {
    span.innerText = "‚Äì";
  });
}
</script>
<div style="margin-top: 40px; padding: 20px; border-top: 2px solid #ccc;">
<button onclick="exportiereText()" style="background-color:#455a64; color:white; border:none; padding:12px 24px; font-size:1em; border-radius:6px;">
    Alle berechneten Werte als Text anzeigen
  </button>
<textarea id="exportTextfeld" style="width:100%; height:240px; margin-top:16px; display:none; font-family:monospace; font-size:0.95em;"></textarea>
</div>
<script>
function exportiereText() {
  const parse = id => {
    const el = document.getElementById(id);
    return el ? el.innerText.trim() : "‚Äì";
  };

  const text = [
    "Berechnungsergebnis (TVN Th√ºringen):",
    "------------------------------------",
    "Gesamt-Brutto: " + parse("gesamtBrutto"),
    "Bereinigtes Brutto: " + parse("gesamtBereinigt"),
    "Steuerfreie Zuschl√§ge (Hauptt√§tigkeit): " + parse("steuerfreiHauptErgebnis"),
    "Steuerfreie Springerzuschl√§ge: " + parse("springerSteuerfrei"),
    "Steuerpflichtiges Brutto: " + parse("steuerpflichtigBrutto"),
    "",
    "Lohnsteuer: " + parse("abzDetailLohnsteuer"),
    "Kirchensteuer: " + parse("abzDetailKirche"),
    "Soli: " + parse("abzDetailSoli"),
    "Rente: " + parse("abzDetailRente"),
    "KV: " + parse("abzDetailKV"),
    "AV: " + parse("abzDetailAV"),
    "PV: " + parse("abzDetailPV"),
    "VL-Abzug: " + parse("abzDetailVL"),
    "Betriebsrente: " + parse("abzDetailRenteBetrieb"),
    "",
    "Endg√ºltiges Netto: " + parse("endNettoErgebnis")
  ].join("\n");

  const feld = document.getElementById("exportTextfeld");
  feld.style.display = "block";
  feld.value = text;
  feld.select();
}
</script>
<style>
input.invalid {
  border: 2px solid red;
  background-color: #ffeaea;
}
</style>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const inputs = document.querySelectorAll('input[type="number"]');
  inputs.forEach(input => {
    input.addEventListener("input", () => {
      let wert = input.value.trim().replace(",", ".");
      const g√ºltig = /^\d*\.?\d*$/.test(wert) && parseFloat(wert) >= 0;
      if (!g√ºltig) {
        input.classList.add("invalid");
        input.setCustomValidity("Nur g√ºltige Zahlen gr√∂√üer/gleich 0 erlaubt.");
        input.reportValidity();
      } else {
        input.classList.remove("invalid");
        input.setCustomValidity("");
      }
    });
  });
});
</script>
<style>
input.invalid {
  border: 2px solid red !important;
  background-color: #ffeaea;
}
</style>
<style>
.tooltip-popup {
  position: absolute;
  background-color: #fff8c4;
  color: #333;
  padding: 8px 10px;
  border: 1px solid #e0c300;
  border-radius: 5px;
  font-size: 0.9em;
  z-index: 9999;
  box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
  display: none;
}
</style>
<div class="tooltip-popup" id="tooltipBox"></div>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const tooltip = document.getElementById("tooltipBox");
  document.querySelectorAll('input[type="number"]').forEach(input => {
    input.addEventListener("focus", (e) => {
      const rect = input.getBoundingClientRect();
      tooltip.textContent = "‚è± Bitte nur g√ºltige Zahlen (z.‚ÄØB. 3 oder 2.5) eingeben.";
      tooltip.style.top = (rect.bottom + window.scrollY + 5) + "px";
      tooltip.style.left = (rect.left + window.scrollX) + "px";
      tooltip.style.display = "block";
    });
    input.addEventListener("blur", () => {
      tooltip.style.display = "none";
    });
  });
});
</script>
<script>
function schliesseOverlay() {
  var overlay = document.getElementById("overlayHinweis");
  if (overlay) {
    overlay.style.display = "none";
    console.log("Hinweis ausgeblendet.");
  } else {
    console.log("Overlay-Element nicht gefunden.");
  }
}

document.addEventListener("DOMContentLoaded", function() {
  var overlay = document.getElementById("overlayHinweis");
  if (overlay) {
    overlay.style.display = "flex";
    console.log("Hinweis angezeigt.");
  } else {
    console.log("Overlay-Element nicht gefunden beim Laden.");
  }
});
</script>
</body>
</html>
